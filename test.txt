
> conversion-engine-solid@2.0.0 test
> jest

ts-jest[ts-jest-transformer] (WARN) Define `ts-jest` config under `globals` is deprecated. Please do
transform: {
    <transform_regex>: ['ts-jest', { /* ts-jest config goes here in Jest */ }],
},
See more at https://kulshekhar.github.io/ts-jest/docs/getting-started/presets#advanced
FAIL src/renderers/__tests__/comprehensive-renderer.test.ts
  Comprehensive Renderer Tests
    EmptyLine Rendering Across All Formats
      ✕ should render single empty lines correctly in all formats (4 ms)
      ✕ should render multiple consecutive empty lines correctly (1 ms)
      ✓ should handle empty lines at section boundaries (3 ms)
    AnnotationLine Rendering Across All Formats
      ✕ should render comment annotations correctly in all formats
      ✓ should render instruction annotations with proper formatting (1 ms)
      ✕ should render tempo annotations with format-specific styling (1 ms)
      ✓ should render dynamics annotations correctly (1 ms)
    Chord Placement Accuracy Tests
      ✕ should place chords above text for above-placement formats (1 ms)
      ✕ should place chords inline for inline-placement formats
      ✕ should handle mixed chord placements correctly
      ✕ should maintain chord position accuracy with complex chords (5 ms)
    Whitespace Rule Validation Tests
      ✕ should apply format-specific spacing for ChordPro (7 ms)
      ✕ should apply format-specific spacing for OnSong (1 ms)
      ✕ should apply format-specific spacing for Songbook (1 ms)
      ✕ should maintain consistent section spacing (1 ms)
      ✕ should handle annotation spacing correctly (1 ms)
    Format-Specific Output Validation
      ✕ should generate valid ChordPro output (1 ms)
      ✕ should generate valid OnSong output
      ✕ should generate valid Songbook output
      ✕ should generate valid Guitar Tabs output (1 ms)
      ✕ should generate valid Nashville output (1 ms)
    Rendering Performance and Metadata
      ✕ should provide accurate rendering metadata (1 ms)
      ✕ should handle rendering options correctly (1 ms)
      ✕ should maintain performance with large chordsheets (1 ms)
    Error Handling and Edge Cases
      ✕ should handle empty chordsheets gracefully (1 ms)
      ✕ should handle chordsheets with only empty lines
      ✕ should handle malformed chord data gracefully (13 ms)

  ● Comprehensive Renderer Tests › EmptyLine Rendering Across All Formats › should render single empty lines correctly in all formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:209:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:207:15)

  ● Comprehensive Renderer Tests › EmptyLine Rendering Across All Formats › should render multiple consecutive empty lines correctly

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:221:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:219:15)

  ● Comprehensive Renderer Tests › AnnotationLine Rendering Across All Formats › should render comment annotations correctly in all formats

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:305:47)

  ● Comprehensive Renderer Tests › AnnotationLine Rendering Across All Formats › should render tempo annotations with format-specific styling

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at OnSongRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at OnSongRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at OnSongRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:375:43)

  ● Comprehensive Renderer Tests › Chord Placement Accuracy Tests › should place chords above text for above-placement formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:422:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:420:20)

  ● Comprehensive Renderer Tests › Chord Placement Accuracy Tests › should place chords inline for inline-placement formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:438:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:436:21)

  ● Comprehensive Renderer Tests › Chord Placement Accuracy Tests › should handle mixed chord placements correctly

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:447:31)

  ● Comprehensive Renderer Tests › Chord Placement Accuracy Tests › should maintain chord position accuracy with complex chords

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:489:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:487:15)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should apply format-specific spacing for ChordPro

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:500:31)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should apply format-specific spacing for OnSong

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at OnSongRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at OnSongRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at OnSongRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:509:31)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should apply format-specific spacing for Songbook

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:518:31)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should maintain consistent section spacing

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:530:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:528:15)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should handle annotation spacing correctly

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:540:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid ChordPro output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:550:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid OnSong output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at OnSongRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at OnSongRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at OnSongRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:560:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid Songbook output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:571:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid Guitar Tabs output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at GuitarTabsRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at GuitarTabsRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at GuitarTabsRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:581:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid Nashville output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at NashvilleRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at NashvilleRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at NashvilleRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:591:31)

  ● Comprehensive Renderer Tests › Rendering Performance and Metadata › should provide accurate rendering metadata

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:605:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:603:15)

  ● Comprehensive Renderer Tests › Rendering Performance and Metadata › should handle rendering options correctly

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:623:31)

  ● Comprehensive Renderer Tests › Rendering Performance and Metadata › should maintain performance with large chordsheets

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:659:31)

  ● Comprehensive Renderer Tests › Error Handling and Edge Cases › should handle empty chordsheets gracefully

    Cannot render chordsheet in songbook format

      74 |         
      75 |         if (!this.canRender(chordsheet)) {
    > 76 |             throw new Error(`Cannot render chordsheet in ${this.format} format`);
         |                   ^
      77 |         }
      78 |
      79 |         const mergedOptions = this.mergeOptions(options);

      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:76:19)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:681:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:679:15)

  ● Comprehensive Renderer Tests › Error Handling and Edge Cases › should handle chordsheets with only empty lines

    Unknown line type: empty

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:707:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:705:15)

  ● Comprehensive Renderer Tests › Error Handling and Edge Cases › should handle malformed chord data gracefully

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Unknown line type: text"

          21 |         }
          22 |         
        > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
             |               ^
          24 |     }
          25 |
          26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:742:31
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:742:64
                at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:740:15)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:742:64
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:740:15)

FAIL tests/e2e/accessibility.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('Accessibility Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/accessibility.spec.ts:3:6)

FAIL tests/components/editor/OutputPreview.test.tsx
  OutputPreview
    Basic Rendering
      ✕ renders empty state when no content is provided (30 ms)
      ✕ displays the provided string value (legacy support) (6 ms)
      ✕ displays Preview header (4 ms)
      ✕ applies custom className (69 ms)
    Chordsheet Rendering
      ✕ renders chordsheet with metadata (4 ms)
      ✕ renders sections without chordsheet wrapper (3 ms)
      ✕ prioritizes chordsheet over sections over string value (23 ms)
      ✕ handles compact mode (17 ms)
    Loading and Error States
      ✕ shows loading overlay when isLoading is true (3 ms)
      ✕ shows progress indicator when progress is provided (2 ms)
      ✕ displays error message when error is provided (3 ms)
      ✕ prioritizes error display over loading (3 ms)
    SOLID Architecture Integration
      ✕ should publish preview update events (3 ms)
      ✕ should auto-save preview content when enabled (1004 ms)
      ✕ should handle conversion errors gracefully (1006 ms)
      ✕ should subscribe to conversion events (5 ms)
      ✕ should handle real-time updates from conversion engine (1004 ms)
    Accessibility
      ✕ has proper accessibility attributes (11 ms)
      ✕ should announce loading state to screen readers (6 ms)
      ✕ should announce errors to screen readers (3 ms)
      ✕ should support keyboard navigation (12 ms)
    Performance
      ✓ should memoize rendered content (3 ms)
      ✕ should cleanup event subscriptions on unmount (3 ms)
      ✕ should handle large chordsheets efficiently (3 ms)
    Error Handling
      ✕ should handle missing services gracefully (2 ms)
      ✕ should handle malformed chordsheet data (2 ms)

  ● OutputPreview › Basic Rendering › renders empty state when no content is provided

    TestingLibraryElementError: Unable to find an element with the text: No content to preview. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      133 |       );
      134 |
    > 135 |       expect(screen.getByText('No content to preview')).toBeInTheDocument();
          |                     ^
      136 |       expect(screen.getByText(/Enter or paste your chord sheet content/)).toBeInTheDocument();
      137 |     });
      138 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:135:21)

  ● OutputPreview › Basic Rendering › displays the provided string value (legacy support)

    TestingLibraryElementError: Unable to find an element with the text: Converted chord sheet content. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      145 |       );
      146 |
    > 147 |       expect(screen.getByText(testValue)).toBeInTheDocument();
          |                     ^
      148 |     });
      149 |
      150 |     it('displays Preview header', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:147:21)

  ● OutputPreview › Basic Rendering › displays Preview header

    TestingLibraryElementError: Unable to find an element with the text: Preview. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      155 |       );
      156 |
    > 157 |       expect(screen.getByText('Preview')).toBeInTheDocument();
          |                     ^
      158 |     });
      159 |
      160 |     it('applies custom className', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:157:21)

  ● OutputPreview › Basic Rendering › applies custom className

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      paragraph:

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 custom-class"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      168 |       // If the component passes the className to its main container, this should work.
      169 |       // If OutputPreview's root element is a div with role='main', this is a good selector.
    > 170 |       const previewContainer = screen.getByRole('main');
          |                                       ^
      171 |       expect(previewContainer).toHaveClass('custom-class');
      172 |     });
      173 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:170:39)

  ● OutputPreview › Chordsheet Rendering › renders chordsheet with metadata

    TestingLibraryElementError: Unable to find an element with the text: Amazing Grace. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      195 |       );
      196 |
    > 197 |       expect(screen.getByText('Amazing Grace')).toBeInTheDocument();
          |                     ^
      198 |       expect(screen.getByText('by John Newton')).toBeInTheDocument();
      199 |       expect(screen.getByText('Key: C')).toBeInTheDocument();
      200 |       expect(screen.getByText('Verse 1')).toBeInTheDocument();

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:197:21)

  ● OutputPreview › Chordsheet Rendering › renders sections without chordsheet wrapper

    TestingLibraryElementError: Unable to find an element with the text: Chorus. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      216 |       );
      217 |
    > 218 |       expect(screen.getByText('Chorus')).toBeInTheDocument();
          |                     ^
      219 |       expect(screen.getByText('How sweet the sound')).toBeInTheDocument();
      220 |     });
      221 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:218:21)

  ● OutputPreview › Chordsheet Rendering › prioritizes chordsheet over sections over string value

    TestingLibraryElementError: Unable to find an element with the text: Test Song. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      241 |       );
      242 |
    > 243 |       expect(screen.getByText('Test Song')).toBeInTheDocument();
          |                     ^
      244 |       expect(screen.queryByText('Section text')).not.toBeInTheDocument();
      245 |       expect(screen.queryByText('String value')).not.toBeInTheDocument();
      246 |     });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:243:21)

  ● OutputPreview › Chordsheet Rendering › handles compact mode

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      paragraph:

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      262 |       // In compact mode, sections should have less spacing.
      263 |       // Assuming the 'main' role element is the container that gets this class.
    > 264 |       const sectionContainer = screen.getByRole('main');
          |                                       ^
      265 |       expect(sectionContainer).toHaveClass('space-y-3');
      266 |     });
      267 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:264:39)

  ● OutputPreview › Loading and Error States › shows loading overlay when isLoading is true

    TestingLibraryElementError: Unable to find an element with the text: Converting.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      276 |
      277 |       // Check for the visible "Converting..." text and the screen reader text
    > 278 |       expect(screen.getAllByText('Converting...')).toHaveLength(2); // One visible, one for screen readers
          |                     ^
      279 |       expect(screen.getByText('Some content')).toBeInTheDocument();
      280 |     });
      281 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:278:21)

  ● OutputPreview › Loading and Error States › shows progress indicator when progress is provided

    TestingLibraryElementError: Unable to find an element with the text: Processing.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      287 |       );
      288 |
    > 289 |       expect(screen.getByText('Processing...')).toBeInTheDocument();
          |                     ^
      290 |       expect(screen.getByRole('progressbar')).toHaveAttribute('aria-valuenow', '50');
      291 |     });
      292 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:289:21)

  ● OutputPreview › Loading and Error States › displays error message when error is provided

    TestingLibraryElementError: Unable to find an element with the text: Test error message. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      299 |       );
      300 |
    > 301 |       expect(screen.getByText(errorMessage)).toBeInTheDocument();
          |                     ^
      302 |     });
      303 |
      304 |     it('prioritizes error display over loading', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:301:21)

  ● OutputPreview › Loading and Error States › prioritizes error display over loading

    TestingLibraryElementError: Unable to find an element with the text: Test error. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      310 |       );
      311 |
    > 312 |       expect(screen.getByText(errorMessage)).toBeInTheDocument();
          |                     ^
      313 |       expect(screen.queryByText('Converting...')).not.toBeInTheDocument();
      314 |     });
      315 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:312:21)

  ● OutputPreview › SOLID Architecture Integration › should publish preview update events

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"chordsheet": {"id": "test-1", "originalKey": "C", "sections": [], "title": "Test Song"}}, "type": "PreviewUpdated"}

    Number of calls: 0

      330 |       );
      331 |
    > 332 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
          |                                        ^
      333 |         expect.objectContaining({
      334 |           type: 'PreviewUpdated',
      335 |           data: expect.objectContaining({

      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:332:40)

  ● OutputPreview › SOLID Architecture Integration › should auto-save preview content when enabled

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"chordsheet": {"id": "test-1", "originalKey": "C", "sections": [], "title": "Test Song"}}

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-4xl mb-2"[39m
              [36m>[39m
                [0m🎼[0m
              [36m</div>[39m
              [36m<p>[39m
                [0mConverted output will appear here[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      355 |
      356 |       await waitFor(() => {
    > 357 |         expect(mockStorageService.save).toHaveBeenCalledWith(
          |                                         ^
      358 |           expect.any(String), // The key for saving
      359 |           expect.objectContaining({
      360 |             chordsheet: chordsheet

      at tests/components/editor/OutputPreview.test.tsx:357:41
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  ● OutputPreview › SOLID Architecture Integration › should handle conversion errors gracefully

    Unable to find an element with the text: /conversion error/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      376 |       );
      377 |
    > 378 |       await waitFor(() => {
          |                    ^
      379 |         expect(screen.getByText(/conversion error/i)).toBeInTheDocument();
      380 |       });
      381 |

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:378:20)

  ● OutputPreview › SOLID Architecture Integration › should subscribe to conversion events

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ConversionCompleted", Any<Function>

    Number of calls: 0

      390 |       );
      391 |
    > 392 |       expect(mockEventManager.subscribe).toHaveBeenCalledWith(
          |                                          ^
      393 |         'ConversionCompleted',
      394 |         expect.any(Function)
      395 |       );

      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:392:42)

  ● OutputPreview › SOLID Architecture Integration › should handle real-time updates from conversion engine

    Unable to find an element with the text: Converted content. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      425 |       }
      426 |
    > 427 |       await waitFor(() => {
          |                    ^
      428 |         expect(screen.getByText('Converted content')).toBeInTheDocument();
      429 |       });
      430 |     });

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:427:20)

  ● OutputPreview › Accessibility › has proper accessibility attributes

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      paragraph:

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      452 |       );
      453 |
    > 454 |       expect(screen.getByRole('main')).toHaveAttribute('aria-label', 'Chord sheet preview');
          |                     ^
      455 |       // Assuming the section renders a role="region" with its title as aria-label
      456 |       expect(screen.getByRole('region', { name: 'Verse section' })).toBeInTheDocument();
      457 |     });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:454:21)

  ● OutputPreview › Accessibility › should announce loading state to screen readers

    TestingLibraryElementError: Unable to find an element with the text: /Converting content/i, which matches selector '.sr-only'. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      465 |
      466 |       // This expects a visually hidden element with aria-live="polite" and the text "Converting content"
    > 467 |       const loadingAnnouncement = screen.getByText(/Converting content/i, { selector: '.sr-only' });
          |                                          ^
      468 |       expect(loadingAnnouncement).toHaveAttribute('aria-live', 'polite');
      469 |     });
      470 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:467:42)

  ● OutputPreview › Accessibility › should announce errors to screen readers

    TestingLibraryElementError: Unable to find an element with the text: /Error occurred/i, which matches selector '.sr-only'. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      478 |
      479 |       // This expects a visually hidden element with aria-live="assertive" and the text "Error occurred"
    > 480 |       const errorAnnouncement = screen.getByText(/Error occurred/i, { selector: '.sr-only' });
          |                                        ^
      481 |       expect(errorAnnouncement).toHaveAttribute('aria-live', 'assertive');
      482 |     });
      483 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:480:40)

  ● OutputPreview › Accessibility › should support keyboard navigation

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      paragraph:

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      501 |       );
      502 |
    > 503 |       const previewContainer = screen.getByRole('main');
          |                                       ^
      504 |       expect(previewContainer).toHaveAttribute('tabIndex', '0');
      505 |     });
      506 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:503:39)

  ● OutputPreview › Performance › should cleanup event subscriptions on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      545 |
      546 |       // Expect unsubscribe to have been called at least once
    > 547 |       expect(mockEventManager.unsubscribe).toHaveBeenCalled();
          |                                            ^
      548 |     });
      549 |
      550 |     it('should handle large chordsheets efficiently', () => {

      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:547:44)

  ● OutputPreview › Performance › should handle large chordsheets efficiently

    TestingLibraryElementError: Unable to find an element with the text: Large Song. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      568 |       );
      569 |
    > 570 |       expect(screen.getByText('Large Song')).toBeInTheDocument();
          |                     ^
      571 |       expect(screen.getByText('Verse 1')).toBeInTheDocument();
      572 |       // Optionally, you could add a performance assertion here, e.g., checking render time
      573 |       // or number of DOM nodes, but that's more advanced.

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:570:21)

  ● OutputPreview › Error Handling › should handle missing services gracefully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      597 |       // You might want to add an assertion here, e.g., expect(screen.getByText('Error loading services')).toBeInTheDocument();
      598 |       // if your component provides such a fallback.
    > 599 |       expect(consoleSpy).toHaveBeenCalled(); // Expect console error if services are null
          |                          ^
      600 |
      601 |       consoleSpy.mockRestore();
      602 |     });

      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:599:26)

  ● OutputPreview › Error Handling › should handle malformed chordsheet data

    TestingLibraryElementError: Unable to find an element with the text: /invalid chordsheet data/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m🎼[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      617 |
      618 |       // Expect the component to display an error message for malformed data
    > 619 |       expect(screen.getByText(/invalid chordsheet data/i)).toBeInTheDocument();
          |                     ^
      620 |     });
      621 |   });
      622 | });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:619:21)

FAIL src/renderers/__tests__/integration.test.ts
  Rendering Engine Integration Tests
    Format Support
      ✓ should support all expected formats (2 ms)
      ✓ should correctly identify supported formats
    Cross-Format Rendering
      ✕ should render to ChordPro format correctly (1 ms)
      ✕ should render to OnSong format correctly (1 ms)
      ✕ should render to Songbook format correctly (1 ms)
      ✕ should render to Guitar Tabs format correctly
      ✕ should render to Nashville format correctly
    Empty Line Handling
      ✕ should handle single empty lines correctly across formats (1 ms)
      ✕ should handle multiple consecutive empty lines correctly
    Annotation Handling
      ✕ should handle different annotation types across formats
    Chord Placement
      ✕ should use inline placement for inline formats (1 ms)
      ✕ should use above placement for above formats (1 ms)
    Original Text Preservation
      ✕ should preserve original text when requested
    Performance and Metadata
      ✕ should provide rendering metadata for all formats
      ✕ should handle large chordsheets efficiently (1 ms)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to ChordPro format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:172:37)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to OnSong format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at OnSongRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at OnSongRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at OnSongRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:186:37)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to Songbook format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:200:37)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to Guitar Tabs format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at GuitarTabsRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at GuitarTabsRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at GuitarTabsRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:216:37)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to Nashville format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at NashvilleRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at NashvilleRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at NashvilleRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:232:37)

  ● Rendering Engine Integration Tests › Empty Line Handling › should handle single empty lines correctly across formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:257:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:255:21)

  ● Rendering Engine Integration Tests › Empty Line Handling › should handle multiple consecutive empty lines correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:275:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:273:21)

  ● Rendering Engine Integration Tests › Annotation Handling › should handle different annotation types across formats

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:331:53)

  ● Rendering Engine Integration Tests › Chord Placement › should use inline placement for inline formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:362:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:360:27)

  ● Rendering Engine Integration Tests › Chord Placement › should use above placement for above formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:377:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:375:26)

  ● Rendering Engine Integration Tests › Original Text Preservation › should preserve original text when requested

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:396:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:394:21)

  ● Rendering Engine Integration Tests › Performance and Metadata › should provide rendering metadata for all formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:417:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:415:21)

  ● Rendering Engine Integration Tests › Performance and Metadata › should handle large chordsheets efficiently

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:458:37)

FAIL tests/e2e/performance.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('Performance Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/performance.spec.ts:3:6)

FAIL tests/services/conversion/comprehensive-integration.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../src/services/conversion-engine-old/conversion-engine' from 'tests/services/conversion/comprehensive-integration.test.ts'

      1 | import { describe, it, expect, beforeEach, afterEach } from '@jest/globals';
    > 2 | import { ConversionEngine } from '../../../../src/services/conversion-engine-old/conversion-engine';
        | ^
      3 | import { FormatDetector } from '../format-detector';
      4 | import { FileOperations } from '../../../src/services/file-operations';
      5 | import { NotationFormat } from '../../../src/types/format';

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/comprehensive-integration.test.ts:2:1)

FAIL tests/e2e/ui-functionality.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('UI Functionality Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/ui-functionality.spec.ts:3:6)

FAIL tests/services/diverse/__tests__/auto-key-detection.test.ts
  ● Test suite failed to run

    Cannot find module '../utils/chord-parser' from 'src/services/key-detector.ts'

    Require stack:
      src/services/key-detector.ts
      tests/services/diverse/__tests__/auto-key-detection.test.ts

      1 | import { Chord } from '../types';
    > 2 | import { ChordParser } from '../utils/chord-parser';
        | ^
      3 | import { MAJOR_KEY_SIGNATURES, MINOR_KEY_SIGNATURES, NASHVILLE_MAJOR_MAPPINGS } from '../constants/chord-mappings';
      4 |
      5 | /**

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/services/key-detector.ts:2:1)
      at Object.<anonymous> (tests/services/diverse/__tests__/auto-key-detection.test.ts:1:1)

FAIL tests/e2e/visual-regression.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('Visual Regression Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/visual-regression.spec.ts:3:6)

FAIL tests/types/validation.test.ts
  Validation Utilities
    validateChordsheet
      ✓ should validate a valid chordsheet (2 ms)
      ✓ should reject null or undefined chordsheet (1 ms)
      ✓ should reject chordsheet with missing required fields (1 ms)
      ✓ should reject chordsheet with invalid sections
      ✓ should validate chordsheet with metadata
      ✓ should reject chordsheet with invalid metadata (1 ms)
    validateSection
      ✓ should validate a valid section
      ✓ should reject section with invalid type (1 ms)
      ✓ should reject section with invalid lines
      ✓ should validate all valid section types (1 ms)
    validateMetadata
      ✓ should validate valid metadata (1 ms)
      ✓ should reject null or undefined metadata
      ✓ should reject metadata with invalid field types (1 ms)
      ✓ should reject custom metadata with non-string values
    validateLines
      ✓ should validate valid lines array
      ✓ should reject non-array input
      ✕ should reject array with invalid lines (72 ms)
    Factory Functions
      createTextLine
        ✓ should create a valid TextLine (1 ms)
        ✓ should create TextLine with default empty chords
        ✓ should throw error for invalid chords (6 ms)
      createEmptyLine
        ✓ should create a valid EmptyLine with default count (1 ms)
        ✓ should create EmptyLine with specific count and lineNumber
        ✓ should throw error for invalid count (1 ms)
      createAnnotationLine
        ✓ should create a valid AnnotationLine with default type
        ✓ should create AnnotationLine with specific type and lineNumber (1 ms)
        ✓ should throw error for empty value (1 ms)
      createChordPlacement
        ✓ should create a valid ChordPlacement
        ✓ should create ChordPlacement without optional placement (1 ms)
        ✓ should throw error for invalid indices (1 ms)
        ✓ should throw error for empty values (1 ms)
    ValidationResult interface
      ✓ should have correct structure (1 ms)
      ✓ should handle errors and warnings (1 ms)

  ● Validation Utilities › validateLines › should reject array with invalid lines

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      270 |
      271 |             const result = validateLines(invalidLines);
    > 272 |             expect(result.valid).toBe(false);
          |                                  ^
      273 |             expect(result.errors.some(e => e.field === 'lines[1]')).toBe(true);
      274 |         });
      275 |     });

      at Object.<anonymous> (tests/types/validation.test.ts:272:34)

FAIL tests/components/controls/KeySelector.test.tsx
  KeySelector
    Basic Rendering
      ✓ renders with correct label (14 ms)
      ✕ displays key options from transposer service (73 ms)
      ✓ shows the selected value (70 ms)
      ✕ includes both major and minor keys (7 ms)
    Key Selection
      ✓ calls onChange when selection changes (15 ms)
      ✕ is disabled when disabled prop is true (8 ms)
      ✓ updates display when key changes (9 ms)
    SOLID Architecture Integration
      ✕ should get available keys from key transposer (58 ms)
      ✕ should publish key change events (8 ms)
      ✕ should validate key selection through transposer service (6 ms)
      ✓ should handle key relationships when requested (4 ms)
      ✓ should handle enharmonic spellings when requested (4 ms)
    Accessibility
      ✓ renders with proper semantic structure (6 ms)
      ✕ should have proper ARIA attributes (6 ms)
      ✓ should support keyboard navigation (99 ms)
      ✕ should be accessible to screen readers (8 ms)
    Error Handling
      ✓ should handle missing key transposer gracefully (4 ms)
      ✓ should handle key loading errors (4 ms)
      ✕ should handle invalid key values (51 ms)
    Performance
      ✓ should not re-fetch keys on every render (5 ms)
      ✕ should cleanup event subscriptions on unmount (3 ms)
    Props Validation
      ✕ should handle all common musical keys (48 ms)
      ✓ should handle optional props correctly (5 ms)
      ✕ should support custom key lists (34 ms)

  ● KeySelector › Basic Rendering › displays key options from transposer service

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      107 |       
      108 |       // Verify that keys are loaded from the service
    > 109 |       expect(mockKeyTransposer.getAvailableKeys).toHaveBeenCalled();
          |                                                  ^
      110 |     });
      111 |
      112 |     it('shows the selected value', () => {

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:109:50)

  ● KeySelector › Basic Rendering › includes both major and minor keys

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      137 |       
      138 |       // Verify the component requests available keys
    > 139 |       expect(mockKeyTransposer.getAvailableKeys).toHaveBeenCalled();
          |                                                  ^
      140 |       
      141 |       // The actual key options will be populated from the mock
      142 |       const select = screen.getByRole('combobox');

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:139:50)

  ● KeySelector › Key Selection › is disabled when disabled prop is true

    expect(element).toBeDisabled()

    Received element is not disabled:
      <select class="
              w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600·
              rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500·
              text-gray-900 dark:text-white text-sm transition-colors
            " />

      176 |       
      177 |       const select = screen.getByRole('combobox');
    > 178 |       expect(select).toBeDisabled();
          |                      ^
      179 |     });
      180 |
      181 |     it('updates display when key changes', () => {

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:178:22)

  ● KeySelector › SOLID Architecture Integration › should get available keys from key transposer

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      217 |       );
      218 |       
    > 219 |       expect(mockKeyTransposer.getAvailableKeys).toHaveBeenCalled();
          |                                                  ^
      220 |     });
      221 |
      222 |     it('should publish key change events', async () => {

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:219:50)

  ● KeySelector › SOLID Architecture Integration › should publish key change events

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"newKey": "G", "oldKey": "C"}, "type": "KeyChanged"}

    Number of calls: 0

      234 |       fireEvent.change(select, { target: { value: 'G' } });
      235 |       
    > 236 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
          |                                        ^
      237 |         expect.objectContaining({
      238 |           type: 'KeyChanged',
      239 |           data: expect.objectContaining({

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:236:40)

  ● KeySelector › SOLID Architecture Integration › should validate key selection through transposer service

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "InvalidKey"
    Received: ""

    Number of calls: 1

      262 |       
      263 |       // Component should still call onChange even with invalid key
    > 264 |       expect(mockOnChange).toHaveBeenCalledWith('InvalidKey');
          |                            ^
      265 |       
      266 |       // Reset mock for other tests
      267 |       mockKeyTransposer.isValidKey.mockReturnValue(true);

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:264:28)

  ● KeySelector › Accessibility › should have proper ARIA attributes

    expect(element).toHaveAttribute("aria-label", Any<String>) // element.getAttribute("aria-label") === Any<String>

    Expected the element to have attribute:
      aria-label=Any<String>
    Received:
      null

      339 |       
      340 |       const select = screen.getByRole('combobox');
    > 341 |       expect(select).toHaveAttribute('aria-label', expect.any(String));
          |                      ^
      342 |     });
      343 |
      344 |     it('should support keyboard navigation', async () => {

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:341:22)

  ● KeySelector › Accessibility › should be accessible to screen readers

    expect(element).toHaveValue(G)

    Expected the element to have value:
      G
    Received:
      C

      379 |       
      380 |       // The component should maintain accessible behavior
    > 381 |       expect(select).toHaveValue('G');
          |                      ^
      382 |     });
      383 |   });
      384 |

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:381:22)

  ● KeySelector › Error Handling › should handle invalid key values

    expect(element).toHaveValue(InvalidKey)

    Expected the element to have value:
      InvalidKey
    Received:
      C

      444 |       const select = screen.getByRole('combobox');
      445 |       expect(select).toBeInTheDocument();
    > 446 |       expect(select).toHaveValue('InvalidKey');
          |                      ^
      447 |     });
      448 |   });
      449 |

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:446:22)

  ● KeySelector › Performance › should cleanup event subscriptions on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      490 |       unmount();
      491 |       
    > 492 |       expect(mockEventManager.unsubscribe).toHaveBeenCalled();
          |                                            ^
      493 |     });
      494 |   });
      495 |

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:492:44)

  ● KeySelector › Props Validation › should handle all common musical keys

    expect(element).toHaveValue(Bb)

    Expected the element to have value:
      Bb
    Received:
      C

      511 |         
      512 |         const select = screen.getByRole('combobox');
    > 513 |         expect(select).toHaveValue(key);
          |                        ^
      514 |         
      515 |         unmount();
      516 |       });

      at tests/components/controls/KeySelector.test.tsx:513:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:501:37)

  ● KeySelector › Props Validation › should support custom key lists

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      546 |       );
      547 |       
    > 548 |       expect(mockKeyTransposer.getAvailableKeys).toHaveBeenCalled();
          |                                                  ^
      549 |       
      550 |       unmount();
      551 |       

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:548:50)

FAIL tests/components/feedback/ProgressIndicator.test.tsx
  ProgressIndicator
    Basic Rendering
      ✕ renders linear progress bar by default (78 ms)
      ✕ renders circular progress when variant is circular (67 ms)
      ✓ displays progress text when provided (4 ms)
      ✕ shows percentage when showPercentage is true (4 ms)
    Progress Validation
      ✕ clamps progress values to 0-100 range (11 ms)
      ✕ handles NaN progress values (7 ms)
      ✕ handles undefined progress values (68 ms)
    Styling and Variants
      ✕ applies correct size classes (10 ms)
      ✕ applies custom className (7 ms)
      ✕ applies different color schemes (7 ms)
    Accessibility
      ✕ has proper accessibility attributes (6 ms)
      ✕ handles progress without text (7 ms)
      ✕ provides proper ARIA labels for different states (5 ms)
    Event Integration
      ✕ should publish progress events when progress changes (3 ms)
      ✕ should publish completion events when progress reaches 100 (3 ms)
      ✕ should subscribe to progress events on mount (1 ms)
      ✕ should unsubscribe from events on unmount (2 ms)
    Animation and Transitions
      ✕ should animate progress changes smoothly (6 ms)
      ✕ should respect reduced motion preferences (24 ms)
    Performance
      ✕ should handle rapid progress updates efficiently (15 ms)
      ✕ should debounce progress events (5 ms)
    Error Handling
      ✕ should handle invalid progress values gracefully (4 ms)
      ✕ should recover from event manager errors (40 ms)

  ● ProgressIndicator › Basic Rendering › renders linear progress bar by default

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      65 |       render(<ProgressIndicator progress={50} />);
      66 |
    > 67 |       const progressBar = screen.getByRole('progressbar');
         |                                  ^
      68 |       expect(progressBar).toBeInTheDocument();
      69 |       expect(progressBar).toHaveAttribute('aria-valuenow', '50');
      70 |       expect(progressBar).toHaveAttribute('aria-valuemin', '0');

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:67:34)

  ● ProgressIndicator › Basic Rendering › renders circular progress when variant is circular

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      75 |       render(<ProgressIndicator progress={75} variant="circular" />);
      76 |
    > 77 |       const progressBar = screen.getByRole('progressbar');
         |                                  ^
      78 |       expect(progressBar).toBeInTheDocument();
      79 |       expect(progressBar).toHaveAttribute('aria-valuenow', '75');
      80 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:77:34)

  ● ProgressIndicator › Basic Rendering › shows percentage when showPercentage is true

    TestingLibraryElementError: Unable to find an element with the text: Loading. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0m60[0m
              [0m%[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      92 |       render(<ProgressIndicator progress={60} text="Loading" showPercentage={true} />);
      93 |
    > 94 |       expect(screen.getByText('Loading')).toBeInTheDocument();
         |                     ^
      95 |       expect(screen.getByText('(60%)')).toBeInTheDocument();
      96 |     });
      97 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:94:21)

  ● ProgressIndicator › Progress Validation › clamps progress values to 0-100 range

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      101 |       const { rerender } = render(<ProgressIndicator progress={-10} />);
      102 |
    > 103 |       let progressBar = screen.getByRole('progressbar');
          |                                ^
      104 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      105 |
      106 |       rerender(<ProgressIndicator progress={150} />);

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:103:32)

  ● ProgressIndicator › Progress Validation › handles NaN progress values

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      113 |       render(<ProgressIndicator progress={NaN} />);
      114 |
    > 115 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      116 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      117 |     });
      118 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:115:34)

  ● ProgressIndicator › Progress Validation › handles undefined progress values

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      122 |       render(<ProgressIndicator progress={undefined as any} />);
      123 |
    > 124 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      125 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      126 |     });
      127 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:124:34)

  ● ProgressIndicator › Styling and Variants › applies correct size classes

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      132 |
      133 |       // The parent element of the progressbar often holds the size class for linear indicators
    > 134 |       let progressContainer = screen.getByRole('progressbar').parentElement;
          |                                      ^
      135 |       expect(progressContainer).toHaveClass('h-1');
      136 |
      137 |       rerender(<ProgressIndicator progress={50} size="lg" />);

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:134:38)

  ● ProgressIndicator › Styling and Variants › applies custom className

    TestingLibraryElementError: Unable to find an accessible element with the role "status"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full custom-class"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      145 |
      146 |       // The outermost container often has the custom className
    > 147 |       const container = screen.getByRole('status');
          |                                ^
      148 |       expect(container).toHaveClass('custom-class');
      149 |     });
      150 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:147:32)

  ● ProgressIndicator › Styling and Variants › applies different color schemes

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      153 |       const { rerender } = render(<ProgressIndicator progress={50} color="green" />);
      154 |
    > 155 |       let progressBar = screen.getByRole('progressbar');
          |                                ^
      156 |       expect(progressBar).toHaveClass('bg-green-500');
      157 |
      158 |       // Using 'orange' as it's an allowed color and maps to bg-orange-500

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:155:32)

  ● ProgressIndicator › Accessibility › has proper accessibility attributes

    TestingLibraryElementError: Unable to find an accessible element with the role "status"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      174 |       render(<ProgressIndicator progress={40} text="Processing" />);
      175 |
    > 176 |       const status = screen.getByRole('status');
          |                             ^
      177 |       expect(status).toHaveAttribute('aria-live', 'polite');
      178 |
      179 |       const progressBar = screen.getByRole('progressbar');

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:176:29)

  ● ProgressIndicator › Accessibility › handles progress without text

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      188 |       render(<ProgressIndicator progress={25} />);
      189 |
    > 190 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      191 |       expect(progressBar).toBeInTheDocument();
      192 |
      193 |       const srText = screen.getByText('Progress: 25 percent complete');

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:190:34)

  ● ProgressIndicator › Accessibility › provides proper ARIA labels for different states

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      198 |       const { rerender } = render(<ProgressIndicator progress={0} text="Starting" />);
      199 |
    > 200 |       let progressBar = screen.getByRole('progressbar');
          |                                ^
      201 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      202 |
      203 |       rerender(<ProgressIndicator progress={100} text="Complete" />);

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:200:32)

  ● ProgressIndicator › Event Integration › should publish progress events when progress changes

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"progress": 50}, "type": "ProgressUpdated"}

    Number of calls: 0

      214 |       rerender(<ProgressIndicator progress={50} />);
      215 |
    > 216 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
          |                                        ^
      217 |         expect.objectContaining({
      218 |           type: 'ProgressUpdated',
      219 |           data: expect.objectContaining({

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:216:40)

  ● ProgressIndicator › Event Integration › should publish completion events when progress reaches 100

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"type": "ProgressCompleted"}

    Number of calls: 0

      227 |       render(<ProgressIndicator progress={100} />);
      228 |
    > 229 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
          |                                        ^
      230 |         expect.objectContaining({
      231 |           type: 'ProgressCompleted'
      232 |         })

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:229:40)

  ● ProgressIndicator › Event Integration › should subscribe to progress events on mount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      238 |
      239 |       // Expect subscribe to have been called at least once
    > 240 |       expect(mockEventManager.subscribe).toHaveBeenCalled();
          |                                          ^
      241 |     });
      242 |
      243 |     it('should unsubscribe from events on unmount', () => {

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:240:42)

  ● ProgressIndicator › Event Integration › should unsubscribe from events on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      247 |
      248 |       // Expect unsubscribe to have been called at least once
    > 249 |       expect(mockEventManager.unsubscribe).toHaveBeenCalled();
          |                                            ^
      250 |     });
      251 |   });
      252 |

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:249:44)

  ● ProgressIndicator › Animation and Transitions › should animate progress changes smoothly

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      255 |       const { rerender } = render(<ProgressIndicator progress={0} animated={true} />);
      256 |
    > 257 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      258 |       expect(progressBar).toHaveClass('transition-all'); // Check for the transition class
      259 |
      260 |       rerender(<ProgressIndicator progress={75} animated={true} />);

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:257:34)

  ● ProgressIndicator › Animation and Transitions › should respect reduced motion preferences

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      284 |       render(<ProgressIndicator progress={50} animated={true} />);
      285 |
    > 286 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      287 |       // If prefers-reduced-motion is true, the transition class should NOT be present
      288 |       expect(progressBar).not.toHaveClass('transition-all');
      289 |     });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:286:34)

  ● ProgressIndicator › Performance › should handle rapid progress updates efficiently

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      312 |       jest.runAllTimers();
      313 |
    > 314 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      315 |       // The last value rendered should be the last one passed, or the one after debounce
      316 |       // If the component itself has debouncing on rendering, this might need adjustment.
      317 |       // Assuming the component updates its internal state immediately and debounces event publishing.

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:314:34)

  ● ProgressIndicator › Performance › should debounce progress events

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      338 |
      339 |       // After advancing timers, only one event should have been published with the last value
    > 340 |       expect(mockEventManager.publish).toHaveBeenCalledTimes(1);
          |                                        ^
      341 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
      342 |         expect.objectContaining({
      343 |           type: 'ProgressUpdated',

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:340:40)

  ● ProgressIndicator › Error Handling › should handle invalid progress values gracefully

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      359 |       }).not.toThrow(); // Ensure the component doesn't crash
      360 |
    > 361 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      362 |       // Invalid values should default to 0
      363 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      364 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:361:34)

  ● ProgressIndicator › Error Handling › should recover from event manager errors

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      380 |       }).not.toThrow();
      381 |
    > 382 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      383 |       expect(progressBar).toBeInTheDocument();
      384 |       expect(progressBar).toHaveAttribute('aria-valuenow', '50');
      385 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:382:34)

FAIL tests/components/editor/InputEditor.test.tsx
  ● Test suite failed to run

    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m105[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m105[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m105[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m105[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m116[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m116[0m           <InputEditor value=\"\" onChange={mockOnChange} placeholder={customPlaceholder} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m116[0m:[93m92[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m116[0m           <InputEditor value=\"\" onChange={mockOnChange} placeholder={customPlaceholder} />
    [7m   [0m [91m                                                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m137[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m137[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m137[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m137[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m149[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m149[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m149[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m149[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m162[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m162[0m           <InputEditor value=\"\" onChange={mockOnChange} disabled={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m162[0m:[93m76[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m162[0m           <InputEditor value=\"\" onChange={mockOnChange} disabled={true} />
    [7m   [0m [91m                                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m173[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m173[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m173[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m173[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m190[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m190[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m190[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m190[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m205[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m205[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m205[0m:[93m84[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m205[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                                                                                   ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m220[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m220[0m           <InputEditor value=\"\" onChange={mockOnChange} validateChords={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m220[0m:[93m82[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m220[0m           <InputEditor value=\"\" onChange={mockOnChange} validateChords={true} />
    [7m   [0m [91m                                                                                 ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m235[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m235[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m235[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m235[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m257[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m257[0m           <InputEditor value=\"\" onChange={mockOnChange} autoSave={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m257[0m:[93m76[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m257[0m           <InputEditor value=\"\" onChange={mockOnChange} autoSave={true} />
    [7m   [0m [91m                                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m284[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m284[0m           <InputEditor value=\"\" onChange={mockOnChange} showFormatDetection={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m284[0m:[93m87[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m284[0m           <InputEditor value=\"\" onChange={mockOnChange} showFormatDetection={true} />
    [7m   [0m [91m                                                                                      ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m301[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m301[0m           <InputEditor value=\"\" onChange={mockOnChange} highlightInvalidChords={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m301[0m:[93m90[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m301[0m           <InputEditor value=\"\" onChange={mockOnChange} highlightInvalidChords={true} />
    [7m   [0m [91m                                                                                         ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m318[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m318[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m318[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m318[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m331[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m331[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m331[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m331[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m348[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m348[0m           <InputEditor value=\"\" onChange={mockOnChange} showFormatDetection={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m348[0m:[93m87[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m348[0m           <InputEditor value=\"\" onChange={mockOnChange} showFormatDetection={true} />
    [7m   [0m [91m                                                                                      ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m371[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m371[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m371[0m:[93m84[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m371[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                                                                                   ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m392[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m392[0m           <InputEditor value=\"\" onChange={mockOnChange} validateChords={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m392[0m:[93m82[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m392[0m           <InputEditor value=\"\" onChange={mockOnChange} validateChords={true} />
    [7m   [0m [91m                                                                                 ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m413[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m413[0m           <InputEditor value=\"\" onChange={mockOnChange} autoSave={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m413[0m:[93m76[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m413[0m           <InputEditor value=\"\" onChange={mockOnChange} autoSave={true} />
    [7m   [0m [91m                                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m437[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m437[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m437[0m:[93m84[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m437[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                                                                                   ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m463[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m463[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m463[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m463[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m

FAIL src/tests/performance/benchmarks.test.ts
  ● Performance Benchmarks › Chord Factory Performance › should create chords efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Chord Factory Performance › should handle complex chord creation efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Chord Factory Performance › should validate chords efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Key Transposition Performance › should transpose chords efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Key Transposition Performance › should calculate key distances efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Key Transposition Performance › should handle batch transposition efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Event System Performance › should handle high-frequency event publishing

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Event System Performance › should handle multiple subscribers efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Memory Usage Benchmarks › should not leak memory during chord creation

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Memory Usage Benchmarks › should handle event subscription/unsubscription without leaks

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Scalability Benchmarks › should scale linearly with chord complexity

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Scalability Benchmarks › should handle increasing numbers of event subscribers efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Comparison with Legacy Implementation › should demonstrate performance improvements

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Stress Testing › should handle extreme loads without crashing

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'dispose')

      33 |
      34 |   afterAll(() => {
    > 35 |     container.dispose();
         |               ^
      36 |   });
      37 |
      38 |   describe('Chord Factory Performance', () => {

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:35:15)

PASS src/tests/unit/transposition/key-transposer.test.ts
  KeyTransposer
    transposeNote
      ✓ should transpose notes correctly with positive semitones (58 ms)
      ✓ should transpose notes correctly with negative semitones
      ✓ should handle octave wrapping (1 ms)
      ✓ should prefer flats when target key uses flats
      ✓ should prefer sharps when target key uses sharps (1 ms)
      ✓ should throw error for invalid note (13 ms)
    transposeChord
      ✓ should transpose chord root (1 ms)
      ✓ should transpose chord with bass note (1 ms)
      ✓ should preserve chord quality and extensions (1 ms)
      ✓ should preserve Nashville number
    getKeyDistance
      ✓ should calculate correct distances for major keys
      ✓ should calculate correct distances for minor keys (1 ms)
      ✓ should handle mixed major/minor keys
      ✓ should return 0 for same key
      ✓ should throw error for invalid keys (2 ms)
    transposeChords
      ✓ should transpose multiple chords
      ✓ should return empty array for empty input (1 ms)
    transposeToKey
      ✓ should transpose chords from one key to another (1 ms)
    getRelativeKey
      ✓ should get relative minor from major key (1 ms)
      ✓ should get relative major from minor key (1 ms)
      ✓ should handle sharp and flat keys
    getParallelKey
      ✓ should get parallel minor from major key (1 ms)
      ✓ should get parallel major from minor key (1 ms)
    areKeysEnharmonic
      ✓ should identify enharmonic major keys (1 ms)
      ✓ should identify enharmonic minor keys
      ✓ should return false for non-enharmonic keys (1 ms)
      ✓ should return false for different modes
    getKeySignature
      ✓ should return correct key signatures for major keys (1 ms)
      ✓ should return correct key signatures for minor keys (1 ms)
    getScaleDegrees
      ✓ should return correct scale degrees for major keys
      ✓ should return correct scale degrees for minor keys
      ✓ should prefer flats for flat keys
    getChordFunction
      ✓ should return correct Roman numerals for major key (1 ms)
      ✓ should return correct Roman numerals for minor key
      ✓ should return N/A for chords not in key (1 ms)
    suggestBestEnharmonicSpelling
      ✓ should prefer keys with fewer accidentals
      ✓ should return original key when no better option exists (1 ms)
    getCommonProgressions
      ✓ should return common progressions for major keys
      ✓ should return common progressions for minor keys (1 ms)
    error handling
      ✓ should handle invalid chord roots gracefully (1 ms)
      ✓ should handle invalid keys in getKeyDistance

FAIL src/tests/unit/events/event-manager.test.ts
  EventManager
    subscribe and publish
      ✕ should subscribe and receive events (1 ms)
      ✕ should handle multiple subscribers for same event
      ✕ should handle multiple events for same subscriber
      ✕ should not call handlers for different event types
    unsubscribe
      ✕ should unsubscribe handlers (1 ms)
      ✕ should only unsubscribe specific handler (1 ms)
      ✓ should handle unsubscribing non-existent handler gracefully (1 ms)
    clear
      ✕ should clear all event handlers
    getHandlerCount
      ✓ should return correct handler count (1 ms)
    getRegisteredEventTypes
      ✓ should return registered event types (1 ms)
    hasHandlers
      ✓ should return true when handlers exist
    subscribeToMultiple
      ✕ should subscribe to multiple event types (1 ms)
    unsubscribeFromMultiple
      ✕ should unsubscribe from multiple event types (1 ms)
    subscribeOnce
      ✕ should unsubscribe after first event
    async handlers
      ✕ should handle async event handlers
      ✕ should handle async handler errors gracefully (1 ms)
    error handling
      ✕ should handle synchronous handler errors gracefully
      ✕ should continue processing other handlers after error (1 ms)
    dispose
      ✓ should dispose and prevent further operations (1 ms)
      ✓ should clear all handlers on dispose (1 ms)
    domain events
      ConversionStartedEvent
        ✓ should create conversion started event with correct properties (1 ms)
      ConversionCompletedEvent
        ✓ should create conversion completed event with correct properties (1 ms)
      ConversionErrorEvent
        ✓ should create conversion error event with correct properties (1 ms)
        ✓ should default recoveryAttempted to false
    handler modification during event processing
      ✕ should handle handlers being removed during event processing
      ✕ should handle handlers being added during event processing

  ● EventManager › subscribe and publish › should subscribe and receive events

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:42:20)

  ● EventManager › subscribe and publish › should handle multiple subscribers for same event

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:59:20)

  ● EventManager › subscribe and publish › should handle multiple events for same subscriber

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:70:20)

  ● EventManager › subscribe and publish › should not call handlers for different event types

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:80:20)

  ● EventManager › unsubscribe › should unsubscribe handlers

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:93:20)

  ● EventManager › unsubscribe › should only unsubscribe specific handler

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:107:20)

  ● EventManager › clear › should clear all event handlers

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:132:20)

  ● EventManager › subscribeToMultiple › should subscribe to multiple event types

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:188:20)

  ● EventManager › unsubscribeFromMultiple › should unsubscribe from multiple event types

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:202:20)

  ● EventManager › subscribeOnce › should unsubscribe after first event

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:215:20)

  ● EventManager › async handlers › should handle async event handlers

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:230:20)

  ● EventManager › async handlers › should handle async handler errors gracefully

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:243:20)

  ● EventManager › error handling › should handle synchronous handler errors gracefully

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:265:20)

  ● EventManager › error handling › should continue processing other handlers after error

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:285:20)

  ● EventManager › handler modification during event processing › should handle handlers being removed during event processing

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:382:20)

  ● EventManager › handler modification during event processing › should handle handlers being added during event processing

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:400:20)

FAIL tests/components/controls/FormatSelector.test.tsx
  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'CHORDPRO')

      22 |   detectFormat: jest.fn(),
      23 |   getSupportedFormats: jest.fn().mockReturnValue([
    > 24 |     NotationFormat.CHORDPRO,
         |                    ^
      25 |     NotationFormat.ONSONG,
      26 |     NotationFormat.NASHVILLE,
      27 |     NotationFormat.GUITAR_TABS,

      at Object.<anonymous> (tests/components/controls/FormatSelector.test.tsx:24:20)

FAIL tests/services/conversion/enhanced-conversion-engine.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../src/services/conversion-engine-old/conversion-engine' from 'tests/services/conversion/enhanced-conversion-engine.test.ts'

    > 1 | import { ConversionEngine } from '../../../../src/services/conversion-engine-old/conversion-engine';
        | ^
      2 | import { ConversionOptions } from '../conversion-engine-old/types/ConversionOptions';
      3 | import { ConversionProgress } from '../conversion-engine-old/types/ConversionProgress';
      4 | import { PerformanceMetrics } from '../conversion-engine-old/types/PerformanceMetrics';

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/enhanced-conversion-engine.test.ts:1:1)

FAIL src/constants/__tests__/chord-mappings.test.ts
  Chord Mappings Constants
    CHROMATIC_NOTES
      ✓ should have 12 notes (59 ms)
      ✓ should start with C (1 ms)
      ✓ should contain all expected notes (1 ms)
      ✓ should contain flat equivalents (1 ms)
    MAJOR_KEY_SIGNATURES
      ✓ should contain all 15 major keys
      ✓ should have C major with no sharps or flats (1 ms)
      ✓ should have G major with F#
      ✓ should have F major with Bb (1 ms)
      ✓ should have all keys with 7 notes each (1 ms)
      ✓ should include sharp keys (2 ms)
      ✓ should include flat keys
    MINOR_KEY_SIGNATURES
      ✓ should contain all 15 minor keys
      ✓ should have A minor with no sharps or flats
      ✓ should have E minor with F# (1 ms)
      ✓ should have D minor with Bb
      ✓ should have all keys with 7 notes each (2 ms)
      ✓ should include sharp minor keys
      ✓ should include flat minor keys (1 ms)
    NASHVILLE_MAJOR_MAPPINGS
      ✓ should have mappings for all major keys (1 ms)
      ✓ should map C major correctly (1 ms)
      ✓ should map G major correctly (1 ms)
      ✕ should have 7 mappings for each key (1 ms)
    NASHVILLE_MINOR_MAPPINGS
      ✓ should have mappings for all minor keys (1 ms)
      ✓ should map A minor correctly (1 ms)
      ✕ should have 7 mappings for each key
    CHORD_QUALITIES
      ✓ should map basic chord qualities
      ✓ should map minor chord qualities (1 ms)
      ✓ should map diminished and augmented qualities
      ✓ should map suspended chord qualities (1 ms)
    CHORD_EXTENSIONS
      ✓ should contain basic seventh chords
      ✓ should contain ninth chords (1 ms)
      ✓ should contain eleventh and thirteenth chords
      ✓ should contain add chords (1 ms)
      ✓ should contain sixth chords
      ✓ should contain suspended variations
      ✓ should contain altered extensions (1 ms)
      ✓ should contain complex extensions
    ENHARMONIC_EQUIVALENTS
      ✓ should map sharp to flat equivalents (56 ms)
      ✓ should map flat to sharp equivalents (1 ms)
      ✓ should map edge case enharmonics (1 ms)
      ✓ should have bidirectional mappings
    Data integrity
      ✓ should have consistent major and minor key counts
      ✕ should have all Nashville mappings initialized
      ✓ should have no duplicate chord extensions
      ✓ should have valid enharmonic pairs (3 ms)

  ● Chord Mappings Constants › NASHVILLE_MAJOR_MAPPINGS › should have 7 mappings for each key

    expect(received).toHaveLength(expected)

    Expected length: 7
    Received length: 12
    Received array:  ["C", "D", "E", "F", "G", "A", "B", "C#", "D#", "F#", …]

      158 |     it('should have 7 mappings for each key', () => {
      159 |       Object.values(NASHVILLE_MAJOR_MAPPINGS).forEach(mapping => {
    > 160 |         expect(Object.keys(mapping)).toHaveLength(7);
          |                                      ^
      161 |       });
      162 |     });
      163 |   });

      at src/constants/__tests__/chord-mappings.test.ts:160:38
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/constants/__tests__/chord-mappings.test.ts:159:47)

  ● Chord Mappings Constants › NASHVILLE_MINOR_MAPPINGS › should have 7 mappings for each key

    expect(received).toHaveLength(expected)

    Expected length: 7
    Received length: 12
    Received array:  ["A", "B", "C", "D", "E", "F", "G", "C#", "D#", "F#", …]

      184 |     it('should have 7 mappings for each key', () => {
      185 |       Object.values(NASHVILLE_MINOR_MAPPINGS).forEach(mapping => {
    > 186 |         expect(Object.keys(mapping)).toHaveLength(7);
          |                                      ^
      187 |       });
      188 |     });
      189 |   });

      at src/constants/__tests__/chord-mappings.test.ts:186:38
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/constants/__tests__/chord-mappings.test.ts:185:47)

  ● Chord Mappings Constants › Data integrity › should have all Nashville mappings initialized

    expect(received).toHaveLength(expected)

    Expected length: 7
    Received length: 12
    Received array:  ["C", "D", "E", "F", "G", "A", "B", "C#", "D#", "F#", …]

      325 |       Object.keys(MAJOR_KEY_SIGNATURES).forEach(key => {
      326 |         expect(NASHVILLE_MAJOR_MAPPINGS[key]).toBeDefined();
    > 327 |         expect(Object.keys(NASHVILLE_MAJOR_MAPPINGS[key])).toHaveLength(7);
          |                                                            ^
      328 |       });
      329 |
      330 |       Object.keys(MINOR_KEY_SIGNATURES).forEach(key => {

      at src/constants/__tests__/chord-mappings.test.ts:327:60
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/constants/__tests__/chord-mappings.test.ts:325:41)

FAIL src/tests/integration/conversion-workflow.test.ts
  Conversion Workflow Integration
    Dependency Injection Integration
      ✕ should resolve all core services (1 ms)
      ✕ should maintain singleton behavior for registered singletons
      ✕ should inject dependencies correctly
    Chord Factory and Builder Integration
      ✕ should create chords using factory and builder patterns
      ✕ should validate chords through integrated validation
    Key Transposition Integration
      ✕ should transpose chords with command pattern support (1 ms)
      ✕ should calculate key distances correctly (1 ms)
      ✕ should provide key relationship analysis (1 ms)
    Event System Integration
      ✕ should publish and handle events correctly
      ✕ should handle multiple subscribers and event types
    Storage System Integration
      ✕ should save and load conversion results
      ✕ should handle storage statistics
    Format Detection Integration
      ✕ should detect formats with confidence scoring
      ✕ should handle multiple format detection (1 ms)
    Error Recovery Integration
      ✕ should handle parsing errors gracefully (1 ms)
    Complete Workflow Integration
      ✕ should handle a complete chord processing workflow (1 ms)
      ✕ should handle event-driven workflow
      ✕ should integrate storage with conversion results
    Performance and Scalability
      ✕ should handle multiple concurrent operations
      ✕ should handle large numbers of events efficiently (1 ms)
    Memory Management
      ✕ should properly dispose of resources

  ● Conversion Workflow Integration › Dependency Injection Integration › should resolve all core services

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Dependency Injection Integration › should resolve all core services

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Dependency Injection Integration › should maintain singleton behavior for registered singletons

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Dependency Injection Integration › should maintain singleton behavior for registered singletons

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Dependency Injection Integration › should inject dependencies correctly

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Dependency Injection Integration › should inject dependencies correctly

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Chord Factory and Builder Integration › should create chords using factory and builder patterns

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Chord Factory and Builder Integration › should create chords using factory and builder patterns

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Chord Factory and Builder Integration › should validate chords through integrated validation

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Chord Factory and Builder Integration › should validate chords through integrated validation

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Key Transposition Integration › should transpose chords with command pattern support

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Key Transposition Integration › should transpose chords with command pattern support

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Key Transposition Integration › should calculate key distances correctly

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Key Transposition Integration › should calculate key distances correctly

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Key Transposition Integration › should provide key relationship analysis

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Key Transposition Integration › should provide key relationship analysis

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Event System Integration › should publish and handle events correctly

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Event System Integration › should publish and handle events correctly

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Event System Integration › should handle multiple subscribers and event types

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Event System Integration › should handle multiple subscribers and event types

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Storage System Integration › should save and load conversion results

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Storage System Integration › should save and load conversion results

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Storage System Integration › should handle storage statistics

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Storage System Integration › should handle storage statistics

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Format Detection Integration › should detect formats with confidence scoring

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Format Detection Integration › should detect formats with confidence scoring

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Format Detection Integration › should handle multiple format detection

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Format Detection Integration › should handle multiple format detection

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Error Recovery Integration › should handle parsing errors gracefully

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Error Recovery Integration › should handle parsing errors gracefully

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Complete Workflow Integration › should handle a complete chord processing workflow

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Complete Workflow Integration › should handle a complete chord processing workflow

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Complete Workflow Integration › should handle event-driven workflow

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Complete Workflow Integration › should handle event-driven workflow

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Complete Workflow Integration › should integrate storage with conversion results

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Complete Workflow Integration › should integrate storage with conversion results

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Performance and Scalability › should handle multiple concurrent operations

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Performance and Scalability › should handle multiple concurrent operations

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Performance and Scalability › should handle large numbers of events efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Performance and Scalability › should handle large numbers of events efficiently

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Memory Management › should properly dispose of resources

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Memory Management › should properly dispose of resources

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

FAIL src/tests/unit/chord/chord-builder.test.ts
  ChordBuilder
    fluent interface
      ✓ should return builder instance for method chaining (2 ms)
      ✓ should build chord with all properties (2 ms)
    setRoot
      ✓ should set valid chord root
      ✓ should throw error for invalid chord root (13 ms)
    setQuality
      ✓ should set chord quality
    extensions
      ✓ should set extensions array (3 ms)
      ✓ should add single extension (1 ms)
      ✓ should add extension by value (1 ms)
      ✓ should add multiple extensions (1 ms)
    setBassNote
      ✓ should set valid bass note
      ✓ should clear bass note when undefined
      ✓ should throw error for invalid bass note (9 ms)
    setPosition
      ✓ should set valid position (61 ms)
      ✓ should throw error for negative position (2 ms)
    setOriginalNotation
      ✓ should set original notation
    setNashvilleNumber
      ✓ should set Nashville number (1 ms)
      ✓ should clear Nashville number when undefined
    build
      ✓ should throw error when root is not set (1 ms)
      ✓ should generate default notation when not provided (1 ms)
      ✓ should validate extensions during build (2 ms)
    reset
      ✓ should reset builder to initial state
      ✓ should return builder instance for chaining (1 ms)
    clone
      ✓ should create independent copy of builder
    setProperties
      ✓ should set multiple properties at once (1 ms)
      ✓ should skip undefined properties (1 ms)
    convenience methods
      ✓ should build major chord
      ✓ should build major chord with custom notation (1 ms)
      ✓ should build minor chord
      ✕ should build dominant 7th chord
      ✓ should build major 7th chord
      ✓ should build minor 7th chord (1 ms)
      ✓ should build suspended chord with default sus4 (1 ms)
      ✓ should build suspended chord with sus2
    error handling
      ✓ should handle invalid root in convenience methods
      ✓ should validate bass note during build (2 ms)
    immutability
      ✓ should not modify original extensions array (1 ms)
      ✓ should create independent extension arrays for each build

  ● ChordBuilder › convenience methods › should build dominant 7th chord

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      351 |       expect(chord.root).toBe('G');
      352 |       expect(chord.quality).toBe(ChordQuality.DOMINANT);
    > 353 |       expect(chord.extensions).toHaveLength(1);
          |                                ^
      354 |       expect(chord.extensions[0].value).toBe('7');
      355 |       expect(chord.originalNotation).toBe('G7');
      356 |     });

      at Object.<anonymous> (src/tests/unit/chord/chord-builder.test.ts:353:32)

▶ Chord Types
  ▶ ChordPlacement interface
    ✖ should create a valid ChordPlacement (1.929508ms)
    ✖ should create ChordPlacement without optional placement (0.22396ms)
    ✖ should accept all valid placement values (0.20539ms)
  ✖ ChordPlacement interface (3.601068ms)
  ▶ Chord interface
    ✖ should create a valid Chord (0.27967ms)
    ✖ should create Chord without optional fields (0.33912ms)
    ✖ should accept all chord qualities (1.971079ms)
  ✖ Chord interface (3.246029ms)
  ▶ ChordExtension interface
    ✖ should create valid ChordExtension (0.611309ms)
    ✖ should accept all extension types (0.30815ms)
  ✖ ChordExtension interface (1.440159ms)
  ▶ Validation Functions
    ▶ validateChordPlacement
      ✖ should validate a valid ChordPlacement (0.419929ms)
      ✖ should validate ChordPlacement without optional placement (0.403819ms)
      ✖ should reject null or undefined (0.17449ms)
      ✖ should reject non-object values (0.25707ms)
      ✖ should reject missing required fields (0.17786ms)
      ✖ should reject invalid startIndex/endIndex (0.16544ms)
      ✖ should reject negative startIndex (0.1494ms)
      ✖ should reject invalid placement value (0.16262ms)
    ✖ validateChordPlacement (2.398369ms)
    ▶ validateChord
      ✖ should validate a valid Chord (0.40587ms)
      ✖ should validate Chord without optional fields (0.2547ms)
      ✖ should reject null or undefined (0.179149ms)
      ✖ should reject invalid quality (0.1855ms)
      ✖ should reject invalid extensions array (0.20101ms)
    ✖ validateChord (1.496229ms)
    ▶ validateChordExtension
      ✖ should validate a valid ChordExtension (0.23487ms)
      ✖ should reject null or undefined (0.22293ms)
      ✖ should reject invalid type (0.16519ms)
      ✖ should reject missing required fields (0.14852ms)
    ✖ validateChordExtension (0.94713ms)
  ✖ Validation Functions (5.143978ms)
  ▶ ChordQuality enum
    ✖ should have all expected values (0.21223ms)
    ✖ should contain exactly 6 values (0.149389ms)
  ✖ ChordQuality enum (0.467289ms)
  ▶ Legacy Annotation interface
    ✖ should accept valid annotation objects (0.2245ms)
    ✖ should accept all valid position values (0.19781ms)
  ✖ Legacy Annotation interface (0.57746ms)
✖ Chord Types (15.971293ms)
FAIL tests/types/chord.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/types/line.test.ts
  Line Types
    TextLine
      ✓ should create a valid TextLine (6 ms)
      ✓ should create TextLine without optional lineNumber (2 ms)
      ✓ should create TextLine with multiple chords (1 ms)
    EmptyLine
      ✓ should create a valid EmptyLine with default count
      ✓ should create EmptyLine with specific count
      ✓ should create EmptyLine with count but no lineNumber (1 ms)
    AnnotationLine
      ✓ should create a valid AnnotationLine with comment type (1 ms)
      ✓ should create AnnotationLine with instruction type (1 ms)
      ✓ should create AnnotationLine with tempo type
      ✓ should create AnnotationLine with dynamics type (1 ms)
    Type Guards
      isTextLine
        ✕ should return true for TextLine
        ✓ should return false for EmptyLine (1 ms)
        ✓ should return false for AnnotationLine (1 ms)
      isEmptyLine
        ✕ should return true for EmptyLine (1 ms)
        ✓ should return false for TextLine (1 ms)
        ✓ should return false for AnnotationLine (1 ms)
      isAnnotationLine
        ✕ should return true for AnnotationLine
        ✓ should return false for TextLine
        ✓ should return false for EmptyLine (1 ms)
    Line Validation
      validateLine
        ✕ should validate a valid TextLine (1 ms)
        ✕ should validate a valid EmptyLine (1 ms)
        ✕ should validate a valid AnnotationLine (1 ms)
        ✕ should reject null or undefined
        ✕ should reject non-object values (1 ms)
        ✕ should reject invalid type
        ✕ should reject TextLine with missing text
        ✕ should reject TextLine with non-array chords
        ✕ should reject EmptyLine with invalid count
        ✕ should reject AnnotationLine with missing value
        ✕ should reject AnnotationLine with invalid annotationType (1 ms)
        ✕ should reject lines with invalid lineNumber (1 ms)
    Discriminated Union
      ✓ should work with discriminated union type (1 ms)

  ● Line Types › Type Guards › isTextLine › should return true for TextLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      181 |         describe('isTextLine', () => {
      182 |             it('should return true for TextLine', () => {
    > 183 |                 expect(isTextLine(textLine)).toBe(true);
          |                                              ^
      184 |             });
      185 |
      186 |             it('should return false for EmptyLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:183:46)

  ● Line Types › Type Guards › isEmptyLine › should return true for EmptyLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      195 |         describe('isEmptyLine', () => {
      196 |             it('should return true for EmptyLine', () => {
    > 197 |                 expect(isEmptyLine(emptyLine)).toBe(true);
          |                                                ^
      198 |             });
      199 |
      200 |             it('should return false for TextLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:197:48)

  ● Line Types › Type Guards › isAnnotationLine › should return true for AnnotationLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      209 |         describe('isAnnotationLine', () => {
      210 |             it('should return true for AnnotationLine', () => {
    > 211 |                 expect(isAnnotationLine(annotationLine)).toBe(true);
          |                                                          ^
      212 |             });
      213 |
      214 |             it('should return false for TextLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:211:58)

  ● Line Types › Line Validation › validateLine › should validate a valid TextLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: {"chords": [{"endIndex": 3, "originalText": "[C]", "startIndex": 0, "value": "C"}], "errors": ["Line content is required for non-blank lines"], "isValid": false, "lineNumber": 1, "text": "Test text", "type": "text", "warnings": undefined}

      239 |                 };
      240 |
    > 241 |                 expect(validateLine(line)).toBe(true);
          |                                            ^
      242 |             });
      243 |
      244 |             it('should validate a valid EmptyLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:241:44)

  ● Line Types › Line Validation › validateLine › should validate a valid EmptyLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: {"count": 2, "errors": ["Line content is required for non-blank lines"], "isValid": false, "lineNumber": 3, "type": "empty", "warnings": undefined}

      249 |                 };
      250 |
    > 251 |                 expect(validateLine(line)).toBe(true);
          |                                            ^
      252 |             });
      253 |
      254 |             it('should validate a valid AnnotationLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:251:44)

  ● Line Types › Line Validation › validateLine › should validate a valid AnnotationLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: {"annotationType": "comment", "errors": ["Line content is required for non-blank lines"], "isValid": false, "lineNumber": 4, "type": "annotation", "value": "Test annotation", "warnings": undefined}

      260 |                 };
      261 |
    > 262 |                 expect(validateLine(line)).toBe(true);
          |                                            ^
      263 |             });
      264 |
      265 |             it('should reject null or undefined', () => {

      at Object.<anonymous> (tests/types/line.test.ts:262:44)

  ● Line Types › Line Validation › validateLine › should reject null or undefined

    TypeError: Cannot read properties of null (reading 'content')

      116 |
      117 |   // Basic validation
    > 118 |   if (!line.content && line.type !== LineType.BLANK) {
          |             ^
      119 |     errors.push('Line content is required for non-blank lines');
      120 |   }
      121 |

      at validateLine (src/types/line.ts:118:13)
      at Object.<anonymous> (tests/types/line.test.ts:266:36)

  ● Line Types › Line Validation › validateLine › should reject non-object values

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"0": "s", "1": "t", "2": "r", "3": "i", "4": "n", "5": "g", "errors": ["Line content is required for non-blank lines"], "isValid": false, "warnings": undefined}

      269 |
      270 |             it('should reject non-object values', () => {
    > 271 |                 expect(validateLine('string')).toBe(false);
          |                                                ^
      272 |                 expect(validateLine(123)).toBe(false);
      273 |                 expect(validateLine([])).toBe(false);
      274 |             });

      at Object.<anonymous> (tests/types/line.test.ts:271:48)

  ● Line Types › Line Validation › validateLine › should reject invalid type

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"errors": ["Line content is required for non-blank lines"], "isValid": false, "text": "Test", "type": "invalid", "warnings": undefined}

      280 |                 };
      281 |
    > 282 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      283 |             });
      284 |
      285 |             it('should reject TextLine with missing text', () => {

      at Object.<anonymous> (tests/types/line.test.ts:282:51)

  ● Line Types › Line Validation › validateLine › should reject TextLine with missing text

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"chords": [], "errors": ["Line content is required for non-blank lines"], "isValid": false, "type": "text", "warnings": undefined}

      289 |                 };
      290 |
    > 291 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      292 |             });
      293 |
      294 |             it('should reject TextLine with non-array chords', () => {

      at Object.<anonymous> (tests/types/line.test.ts:291:51)

  ● Line Types › Line Validation › validateLine › should reject TextLine with non-array chords

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"chords": "not an array", "errors": ["Line content is required for non-blank lines"], "isValid": false, "text": "Test", "type": "text", "warnings": undefined}

      299 |                 };
      300 |
    > 301 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      302 |             });
      303 |
      304 |             it('should reject EmptyLine with invalid count', () => {

      at Object.<anonymous> (tests/types/line.test.ts:301:51)

  ● Line Types › Line Validation › validateLine › should reject EmptyLine with invalid count

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"count": -1, "errors": ["Line content is required for non-blank lines"], "isValid": false, "type": "empty", "warnings": undefined}

      308 |                 };
      309 |
    > 310 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      311 |             });
      312 |
      313 |             it('should reject AnnotationLine with missing value', () => {

      at Object.<anonymous> (tests/types/line.test.ts:310:51)

  ● Line Types › Line Validation › validateLine › should reject AnnotationLine with missing value

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"annotationType": "comment", "errors": ["Line content is required for non-blank lines"], "isValid": false, "type": "annotation", "warnings": undefined}

      317 |                 };
      318 |
    > 319 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      320 |             });
      321 |
      322 |             it('should reject AnnotationLine with invalid annotationType', () => {

      at Object.<anonymous> (tests/types/line.test.ts:319:51)

  ● Line Types › Line Validation › validateLine › should reject AnnotationLine with invalid annotationType

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"annotationType": "invalid", "errors": ["Line content is required for non-blank lines"], "isValid": false, "type": "annotation", "value": "Test", "warnings": undefined}

      327 |                 };
      328 |
    > 329 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      330 |             });
      331 |
      332 |             it('should reject lines with invalid lineNumber', () => {

      at Object.<anonymous> (tests/types/line.test.ts:329:51)

  ● Line Types › Line Validation › validateLine › should reject lines with invalid lineNumber

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"chords": [], "errors": ["Line content is required for non-blank lines"], "isValid": false, "lineNumber": "not a number", "text": "Test", "type": "text", "warnings": undefined}

      338 |                 };
      339 |
    > 340 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      341 |             });
      342 |         });
      343 |     });

      at Object.<anonymous> (tests/types/line.test.ts:340:51)

FAIL tests/e2e/responsive-design.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('Responsive Design Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/responsive-design.spec.ts:3:6)

FAIL tests/services/conversion/format-detector.test.ts
  ● Test suite failed to run

    Cannot find module '../format-detector' from 'tests/services/conversion/format-detector.test.ts'

    > 1 | import { FormatDetector } from '../format-detector';
        | ^
      2 | import { NotationFormat } from '../../../src/types';
      3 |
      4 | describe('FormatDetector', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/format-detector.test.ts:1:1)

PASS src/tests/unit/chord/chord-factory.test.ts
  ChordFactory
    createChord
      ✓ should create chord from valid chord string (3 ms)
      ✓ should throw error for invalid chord string (19 ms)
      ✓ should throw error for empty chord string (2 ms)
      ✓ should throw error for non-string input (1 ms)
      ✓ should set position when provided
    createNashvilleChord
      ✓ should create Nashville chord with valid number and quality (1 ms)
      ✓ should throw error for invalid Nashville number (2 ms)
    createChordFromComponents
      ✓ should create chord from valid components (1 ms)
      ✓ should throw error for invalid components (1 ms)
    isValidChord
      ✓ should return true for valid chord
      ✓ should return false for invalid chord (1 ms)
      ✓ should return false when validation fails (1 ms)
    createSimpleChord
      ✓ should create simple major chord (1 ms)
      ✓ should create simple minor chord
      ✓ should throw error for invalid root (2 ms)
    createSlashChord
      ✓ should create slash chord with valid notes
      ✓ should create slash chord with different quality
      ✓ should throw error for invalid root (1 ms)
      ✓ should throw error for invalid bass note (1 ms)
    cloneChord
      ✓ should clone chord without modifications (1 ms)
      ✓ should clone chord with modifications (1 ms)
    builder methods
      ✓ should create chord builder
      ✓ should create Nashville chord builder (57 ms)
    error handling
      ✓ should handle parser errors gracefully (2 ms)
      ✓ should handle validator errors gracefully (1 ms)
    integration with real parser and validator
      ✓ should create complex chords correctly (2 ms)
      ✓ should validate and reject truly invalid chords (3 ms)

PASS src/tests/unit/dependency-injection/dependency-container.test.ts
  DependencyContainer
    register
      ✓ should register transient services (54 ms)
      ✓ should throw error when registering duplicate token (14 ms)
      ✓ should create new instances for transient services (1 ms)
    registerSingleton
      ✓ should register singleton services (1 ms)
      ✓ should return same instance for singleton services (1 ms)
      ✓ should throw error when registering duplicate singleton token (1 ms)
    resolve
      ✓ should resolve registered services (1 ms)
      ✓ should throw error for unregistered services (1 ms)
      ✓ should handle dependency injection (1 ms)
    isRegistered
      ✓ should return true for registered services
      ✓ should return false for unregistered services (1 ms)
    unregister
      ✓ should unregister services (1 ms)
      ✓ should return false for unregistered services
    clear
      ✓ should clear all registrations
    getRegisteredTokens
      ✓ should return all registered tokens (1 ms)
      ✓ should return empty array when no services registered (1 ms)
    registerValue
      ✓ should register values directly
    registerClass
      ✓ should register class constructors without dependencies (1 ms)
      ✓ should register class constructors with dependencies (1 ms)
      ✓ should register as singleton when specified
    createChild
      ✓ should create child container with inherited registrations (1 ms)
      ✓ should allow child to override parent registrations (71 ms)
    dispose
      ✓ should dispose singleton instances with dispose method (1 ms)
      ✓ should clear all registrations on dispose
      ✓ should not throw when disposing services without dispose method (1 ms)
    error handling
      ✓ should handle factory function errors (1 ms)
      ✓ should handle circular dependencies gracefully (5 ms)
    complex scenarios
      ✓ should handle multiple levels of dependencies (1 ms)
      ✓ should maintain singleton behavior across complex dependency graphs

FAIL tests/components/editor/SectionRenderer.test.tsx
  SectionRenderer
    Basic Rendering
      ✕ renders verse section with title (8 ms)
      ✕ renders section without custom title using default title (8 ms)
      ✓ applies correct styling for different section types (9 ms)
      ✓ renders empty section with placeholder (3 ms)
    Mixed Line Types
      ✕ renders section with mixed line types (9 ms)
    Section Types
      ✕ does not show title for unknown section type without custom title (3 ms)
      ✕ shows title for unknown section type with custom title (3 ms)
      ✓ renders all section types with correct default titles (75 ms)
    Event Integration
      ✕ should subscribe to section events on mount (2 ms)
      ✕ should unsubscribe from events on unmount (2 ms)
    Accessibility
      ✓ provides proper ARIA attributes for sections (4 ms)
      ✓ provides proper heading structure (46 ms)
    Error Handling
      ✕ handles invalid section data gracefully (21 ms)
      ✕ handles missing line data gracefully (12 ms)
    Performance
      ✕ handles large sections efficiently (124 ms)

  ● SectionRenderer › Basic Rendering › renders verse section with title

    TestingLibraryElementError: Unable to find an element with the text: Amazing grace how sweet the sound. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Verse 1 section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-blue-300 bg-blue-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-header px-4 py-2 bg-white/50 border-b border-gray-200/50"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-semibold text-gray-700 uppercase tracking-wide"[39m
            [36m>[39m
              [0mVerse 1[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "Amazing grace how sweet the sound",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      72 |       
      73 |       expect(screen.getByText('Verse 1')).toBeInTheDocument();
    > 74 |       expect(screen.getByText('Amazing grace how sweet the sound')).toBeInTheDocument();
         |                     ^
      75 |       expect(screen.getByRole('region')).toHaveAttribute('aria-label', 'Verse 1 section');
      76 |     });
      77 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:74:21)

  ● SectionRenderer › Basic Rendering › renders section without custom title using default title

    TestingLibraryElementError: Unable to find an element with the text: How sweet the sound. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Chorus section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-green-300 bg-green-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-header px-4 py-2 bg-white/50 border-b border-gray-200/50"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-semibold text-gray-700 uppercase tracking-wide"[39m
            [36m>[39m
              [0mChorus[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "How sweet the sound",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      92 |       
      93 |       expect(screen.getByText('Chorus')).toBeInTheDocument();
    > 94 |       expect(screen.getByText('How sweet the sound')).toBeInTheDocument();
         |                     ^
      95 |     });
      96 |
      97 |     it('applies correct styling for different section types', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:94:21)

  ● SectionRenderer › Mixed Line Types › renders section with mixed line types

    TestingLibraryElementError: Unable to find an element with the text: Amazing grace. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Verse section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-blue-300 bg-blue-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-header px-4 py-2 bg-white/50 border-b border-gray-200/50"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-semibold text-gray-700 uppercase tracking-wide"[39m
            [36m>[39m
              [0mVerse[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "Amazing grace",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "empty",
      "count": 1,
      "lineNumber": 2
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "annotation",
      "value": "Play softly",
      "annotationType": "instruction",
      "lineNumber": 3
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      166 |       const { container } = render(<SectionRenderer section={section} />);
      167 |       
    > 168 |       expect(screen.getByText('Amazing grace')).toBeInTheDocument();
          |                     ^
      169 |       expect(screen.getByText('Play softly')).toBeInTheDocument();
      170 |       
      171 |       // Check for empty line using container query since it's aria-hidden

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:168:21)

  ● SectionRenderer › Section Types › does not show title for unknown section type without custom title

    TestingLibraryElementError: Unable to find an element with the text: Some text. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Section section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-gray-300 bg-gray-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "Some text",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      192 |       
      193 |       expect(screen.queryByText('Section')).not.toBeInTheDocument();
    > 194 |       expect(screen.getByText('Some text')).toBeInTheDocument();
          |                     ^
      195 |     });
      196 |
      197 |     it('shows title for unknown section type with custom title', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:194:21)

  ● SectionRenderer › Section Types › shows title for unknown section type with custom title

    TestingLibraryElementError: Unable to find an element with the text: Some text. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Custom Section section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-gray-300 bg-gray-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-header px-4 py-2 bg-white/50 border-b border-gray-200/50"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-semibold text-gray-700 uppercase tracking-wide"[39m
            [36m>[39m
              [0mCustom Section[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "Some text",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      212 |       
      213 |       expect(screen.getByText('Custom Section')).toBeInTheDocument();
    > 214 |       expect(screen.getByText('Some text')).toBeInTheDocument();
          |                     ^
      215 |     });
      216 |
      217 |     it('renders all section types with correct default titles', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:214:21)

  ● SectionRenderer › Event Integration › should subscribe to section events on mount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      266 |       render(<SectionRenderer section={section} />);
      267 |       
    > 268 |       expect(mockEventManager.subscribe).toHaveBeenCalled();
          |                                          ^
      269 |     });
      270 |
      271 |     it('should unsubscribe from events on unmount', () => {

      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:268:42)

  ● SectionRenderer › Event Integration › should unsubscribe from events on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      286 |       unmount();
      287 |       
    > 288 |       expect(mockEventManager.unsubscribe).toHaveBeenCalled();
          |                                            ^
      289 |     });
      290 |   });
      291 |

      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:288:44)

  ● SectionRenderer › Error Handling › handles invalid section data gracefully

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of null (reading 'length')"

          93 |       
          94 |       <div className="section-content px-4 py-3 space-y-2">
        > 95 |         {section.lines.length === 0 ? (
             |                        ^
          96 |           <div className="text-gray-400 italic text-sm">
          97 |             (Empty section)
          98 |           </div>

      at SectionRenderer (src/components/editor/SectionRenderer.tsx:95:24)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at tests/components/editor/SectionRenderer.test.tsx:343:15
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:344:14)
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:344:14)

  ● SectionRenderer › Error Handling › handles missing line data gracefully

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of null (reading 'type')"

           99 |
          100 | export function isTextLine(line: Line): line is TextLine {
        > 101 |   return line.type === LineType.CHORD_LYRIC;
              |               ^
          102 | }
          103 |
          104 | export function isEmptyLine(line: Line): line is EmptyLine {

      at isTextLine (src/types/line.ts:101:15)
      at LineRenderer (src/components/editor/LineRenderer.tsx:209:17)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at tests/components/editor/SectionRenderer.test.tsx:364:15
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:365:14)
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:365:14)

  ● SectionRenderer › Performance › handles large sections efficiently

    expect(received).toBeLessThan(expected)

    Expected: < 100
    Received:   122.00221800000145

      391 |
      392 |       // Should render within reasonable time (less than 100ms)
    > 393 |       expect(endTime - startTime).toBeLessThan(100);
          |                                   ^
      394 |     });
      395 |   });
      396 | });

      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:393:35)

PASS src/tests/unit/value-objects/nashville-number.test.ts
  NashvilleNumber
    constructor
      ✓ should create valid Nashville numbers (63 ms)
      ✓ should reject invalid Nashville numbers (13 ms)
      ✓ should reject non-integer values (2 ms)
    getValue
      ✓ should return the numeric value (1 ms)
    toRomanNumeral
      ✓ should convert to major Roman numerals (1 ms)
      ✓ should convert to minor Roman numerals (1 ms)
    toString
      ✓ should return string representation (1 ms)
    equals
      ✓ should return true for equal Nashville numbers (1 ms)
      ✓ should return false for different Nashville numbers
    scale degree functions
      ✓ should identify tonic correctly (1 ms)
      ✓ should identify subdominant correctly (1 ms)
      ✓ should identify dominant correctly
    getScaleDegreeName
      ✓ should return correct scale degree names
    harmonic functions
      getFunctionInMajor
        ✓ should return correct functions in major key (1 ms)
      getFunctionInMinor
        ✓ should return correct functions in minor key (1 ms)
    getIntervalTo
      ✓ should calculate correct intervals
      ✓ should handle wrap-around correctly (1 ms)
    transpose
      ✓ should transpose correctly with positive intervals
      ✓ should transpose correctly with negative intervals (1 ms)
      ✓ should wrap around correctly
      ✓ should handle negative wrap-around (1 ms)
    static methods
      fromRomanNumeral
        ✓ should create from major Roman numerals
        ✓ should create from minor Roman numerals (45 ms)
        ✓ should throw error for invalid Roman numerals (1 ms)
      fromString
        ✓ should create from valid string numbers (1 ms)
        ✓ should throw error for invalid strings (3 ms)
      isValid
        ✓ should return true for valid numbers (1 ms)
        ✓ should return false for invalid numbers (1 ms)
      isValidString
        ✓ should return true for valid string numbers (1 ms)
        ✓ should return false for invalid strings (1 ms)
      getAllValidNumbers
        ✓ should return all valid Nashville numbers (1 ms)
    chord quality helpers
      getTypicalQualityInMajor
        ✓ should return correct qualities for major key (1 ms)
      getTypicalQualityInMinor
        ✓ should return correct qualities for minor key (1 ms)

FAIL tests/services/diverse/__tests__/error-recovery.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../src/services/error-recovery/error-recovery' from 'tests/services/diverse/__tests__/error-recovery.test.ts'

      1 | import { describe, it, expect, beforeEach } from '@jest/globals';
    > 2 | import { ErrorRecoveryService } from '../../../../src/services/error-recovery/error-recovery';
        | ^
      3 | import { ConversionErrorFactory, ConversionErrorType } from '../../../../src/types/conversion-error';
      4 | import { TextLine, AnnotationLine } from '../../../../src/types/line';
      5 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/diverse/__tests__/error-recovery.test.ts:2:1)

▶ SongbookRenderer
  ▶ format property
    ✔ should have correct format (2.498999ms)
  ✔ format property (2.868719ms)
  ▶ getDefaultWhitespaceRules
    ✔ should return Songbook-specific whitespace rules (2.585979ms)
  ✔ getDefaultWhitespaceRules (2.692418ms)
  ▶ renderMetadata
    ✖ should render Songbook-style metadata (0.34902ms)
    ✖ should handle metadata with tempo and capo (0.21481ms)
  ✖ renderMetadata (0.700069ms)
  ▶ renderSectionTitle
    ✔ should render verse section title (0.50211ms)
    ✔ should render chorus section title (0.35332ms)
    ✔ should render bridge section title (0.3844ms)
    ✔ should render pre-chorus section title (0.396599ms)
    ✔ should render other section types in uppercase (0.406589ms)
  ✔ renderSectionTitle (2.427999ms)
  ▶ canRender
    ✔ should return true for chordsheet with chords (0.33847ms)
    ✔ should return false for chordsheet without chords (0.27122ms)
    ✔ should return false for invalid chordsheet (0.22061ms)
  ✔ canRender (1.00332ms)
  ▶ chord placement
    ✖ should render chords above text by default (0.17053ms)
    ✖ should handle complex chord positioning (0.29683ms)
  ✖ chord placement (0.62177ms)
  ▶ annotation handling
    ✖ should render comments with three empty lines after (0.20155ms)
  ✖ annotation handling (0.34455ms)
  ▶ section spacing
    ✖ should use correct spacing between sections (0.23595ms)
  ✖ section spacing (0.31188ms)
  ▶ full rendering
    ✖ should render complete Songbook document (0.23586ms)
  ✖ full rendering (0.32654ms)
✖ SongbookRenderer (12.060715ms)
FAIL src/renderers/__tests__/songbook-renderer.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/services/diverse/storage/local-storage-provider.test.ts
  ● Test suite failed to run

    Cannot find module '../local-storage-provider' from 'tests/services/diverse/storage/local-storage-provider.test.ts'

    > 1 | import { LocalStorageProvider } from '../local-storage-provider';
        | ^
      2 | import { FileMetadata } from '../storage-provider.interface';
      3 |
      4 | // Mock localStorage

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/diverse/storage/local-storage-provider.test.ts:1:1)

FAIL src/renderers/__tests__/base-renderer.test.ts
  BaseRenderer
    render
      ✕ should render complete chordsheet with metadata (2 ms)
      ✕ should render without metadata when option is disabled (1 ms)
      ✕ should handle multiple sections with spacing (1 ms)
      ✓ should throw error if chordsheet cannot be rendered (2 ms)
      ✕ should include rendering time in metadata
    renderSection
      ✕ should render section with title and lines
      ✕ should render section without title (1 ms)
    renderLine
      ✕ should delegate to line renderer
    canRender
      ✓ should return true for valid chordsheet
      ✓ should return false for null chordsheet (1 ms)
      ✓ should return false for chordsheet without sections
      ✓ should return false for chordsheet with invalid sections
    mergeOptions
      ✓ should use defaults when no options provided (1 ms)
      ✓ should merge provided options with defaults (1 ms)
      ✓ should merge whitespace rules (1 ms)

  ● BaseRenderer › render › should render complete chordsheet with metadata

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at TestRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:88:37)

  ● BaseRenderer › render › should render without metadata when option is disabled

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at TestRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:106:37)

  ● BaseRenderer › render › should handle multiple sections with spacing

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at TestRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:127:37)

  ● BaseRenderer › render › should include rendering time in metadata

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at TestRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:144:37)

  ● BaseRenderer › renderSection › should render section with title and lines

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:166:37)

  ● BaseRenderer › renderSection › should render section without title

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:184:37)

  ● BaseRenderer › renderLine › should delegate to line renderer

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:199:37)

PASS tests/components/animations/AnimationCoordinator.test.tsx
  AnimationCoordinator
    ✓ provides animation coordinator context (13 ms)
    ✓ starts animations correctly (10 ms)
    ✓ ends animations correctly (5 ms)
    ✓ auto-ends animations after duration (5 ms)
    ✓ manages performance modes correctly (7 ms)
    ✓ queues animations when at capacity (5 ms)
    ✓ handles priority correctly (3 ms)
    ✓ throws error when used outside provider (40 ms)
  withAnimationCoordination
    ✓ wraps component with animation coordination (7 ms)
  AnimationPerformanceMonitor
    ✓ monitors performance without rendering UI (3 ms)
    ✓ calls performance callback (1 ms)

FAIL src/renderers/__tests__/line-renderer.test.ts
  LineRenderer
    renderTextLine
      ✓ should render text line without chords (2 ms)
      ✓ should render text line with inline chords for ChordPro format (1 ms)
      ✓ should render text line with chords above for Songbook format (1 ms)
      ✓ should preserve original text when option is enabled (1 ms)
      ✓ should handle chord placement override (1 ms)
    renderEmptyLine
      ✓ should render single empty line
      ✓ should render multiple empty lines (2 ms)
    renderAnnotationLine
      ✓ should render ChordPro comment annotation
      ✓ should render ChordPro instruction annotation
      ✓ should render OnSong comment annotation (1 ms)
      ✓ should render Songbook comment with spacing (1 ms)
      ✓ should render Guitar Tabs comment annotation
      ✓ should render Nashville comment annotation (2 ms)
    renderLine
      ✕ should route to correct renderer based on line type
      ✓ should throw error for unknown line type (2 ms)

  ● LineRenderer › renderLine › should route to correct renderer based on line type

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at Object.<anonymous> (src/renderers/__tests__/line-renderer.test.ts:243:29)

FAIL tests/services/diverse/storage/cloud-storage-integration.test.ts
  Cloud Storage Integration
    StorageProviderFactory
      ✓ should create local storage provider (3 ms)
      ✓ should create Google Drive provider (2 ms)
      ✓ should create Dropbox provider (70 ms)
      ✓ should create OneDrive provider (4 ms)
      ✓ should create iCloud provider (2 ms)
      ✓ should throw error for unknown provider (19 ms)
      ✓ should return available providers (73 ms)
      ✓ should check provider configuration (2 ms)
      ✓ should detect configured providers with env vars (2 ms)
      ✓ should return missing configuration (2 ms)
      ✓ should get provider configuration details (1 ms)
    OAuthManager
      ✓ should generate OAuth state (118 ms)
      ✕ should store and retrieve tokens (74 ms)
      ✓ should detect expired tokens (2 ms)
      ✕ should check authentication status (2 ms)
      ✕ should clear all tokens (2 ms)
    Provider Authentication Status
      ✓ should correctly report authentication status for cloud providers (4 ms)
      ✓ should handle local storage provider authentication (2 ms)
      ✓ should handle provider creation without configuration (3 ms)

  ● Cloud Storage Integration › OAuthManager › should store and retrieve tokens

    expect(received).toEqual(expected) // deep equality

    Expected: {"accessToken": "test-access-token", "expiresAt": 1753825374456, "refreshToken": "test-refresh-token", "tokenType": "Bearer"}
    Received: null

      153 |       const retrieved = OAuthManager.getTokens('test-provider');
      154 |
    > 155 |       expect(retrieved).toEqual(tokens);
          |                         ^
      156 |     });
      157 |
      158 |     it('should detect expired tokens', () => {

      at Object.<anonymous> (tests/services/diverse/storage/cloud-storage-integration.test.ts:155:25)

  ● Cloud Storage Integration › OAuthManager › should check authentication status

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      185 |
      186 |       OAuthManager.storeTokens('test-provider', tokens);
    > 187 |       expect(OAuthManager.isAuthenticated('test-provider')).toBe(true);
          |                                                             ^
      188 |     });
      189 |
      190 |     it('should clear all tokens', () => {

      at Object.<anonymous> (tests/services/diverse/storage/cloud-storage-integration.test.ts:187:61)

  ● Cloud Storage Integration › OAuthManager › should clear all tokens

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      199 |       OAuthManager.storeTokens('provider2', tokens);
      200 |
    > 201 |       expect(OAuthManager.isAuthenticated('provider1')).toBe(true);
          |                                                         ^
      202 |       expect(OAuthManager.isAuthenticated('provider2')).toBe(true);
      203 |
      204 |       OAuthManager.clearAllTokens();

      at Object.<anonymous> (tests/services/diverse/storage/cloud-storage-integration.test.ts:201:57)

PASS src/tests/unit/value-objects/chord-root.test.ts
  ChordRoot
    constructor
      ✓ should create valid chord roots (6 ms)
      ✓ should reject invalid chord roots (91 ms)
      ✓ should normalize input by trimming whitespace
      ✓ should throw error for null or undefined input (1 ms)
    toString
      ✓ should return string representation (1 ms)
    equals
      ✓ should return true for equal chord roots (1 ms)
      ✓ should return false for different chord roots (1 ms)
    accidental detection
      ✓ should detect sharp notes (1 ms)
      ✓ should detect flat notes (1 ms)
      ✓ should detect natural notes (2 ms)
    enharmonic equivalents
      ✓ should return correct enharmonic equivalents (1 ms)
      ✓ should return null for natural notes without enharmonic equivalents (1 ms)
    chromatic index
      ✓ should return correct chromatic indices (2 ms)
    fromChromaticIndex
      ✓ should create chord roots from chromatic indices with sharps (8 ms)
      ✓ should create chord roots from chromatic indices with flats (80 ms)
      ✓ should throw error for invalid chromatic indices (1 ms)
    transpose
      ✓ should transpose correctly with positive semitones (4 ms)
      ✓ should transpose correctly with negative semitones (2 ms)
      ✓ should wrap around octave correctly (1 ms)
      ✓ should handle negative wrap-around (6 ms)
      ✓ should prefer flats when specified
      ✓ should prefer sharps when specified (1 ms)
    static methods
      isValid
        ✓ should return true for valid chord roots (1 ms)
        ✓ should return false for invalid chord roots (1 ms)
      getAllValidRoots
        ✓ should return all valid chord roots (7 ms)
        ✓ should return a copy of the array (1 ms)

FAIL tests/services/diverse/storage/file-operations.test.ts
  ● Test suite failed to run

    Cannot find module '../format-detector' from 'tests/services/diverse/storage/file-operations.test.ts'

       5 |
       6 | // Mock the FormatDetector and AutoKeyDetection
    >  7 | jest.mock('../format-detector');
         |      ^
       8 | jest.mock('../auto-key-detection');
       9 |
      10 | const mockFormatDetector = FormatDetector as jest.MockedClass<typeof FormatDetector>;

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/diverse/storage/file-operations.test.ts:7:6)

FAIL src/tests/setup.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/renderers/__tests__/chordpro-renderer.test.ts
  ChordProRenderer
    format property
      ✓ should have correct format (2 ms)
    getDefaultWhitespaceRules
      ✓ should return ChordPro-specific whitespace rules (1 ms)
    renderMetadata
      ✕ should render ChordPro-style metadata (1 ms)
      ✕ should not render metadata when option is disabled (4 ms)
      ✕ should handle missing metadata gracefully (1 ms)
    renderSectionTitle
      ✓ should render verse section with directive (1 ms)
      ✓ should render chorus section with directive (1 ms)
      ✓ should render bridge section with directive (1 ms)
      ✓ should render pre-chorus section with prechorus directive
      ✓ should render unknown section types as comments (1 ms)
      ✓ should not render section title when not provided (1 ms)
    escapeSpecialCharacters
      ✓ should escape ChordPro special characters (1 ms)
    canRender
      ✓ should return true for valid chordsheet
      ✓ should return false for invalid chordsheet (1 ms)
    full rendering
      ✕ should render complete ChordPro document (1 ms)
      ✕ should preserve original text when requested (1 ms)

  ● ChordProRenderer › renderMetadata › should render ChordPro-style metadata

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:73:37)

  ● ChordProRenderer › renderMetadata › should not render metadata when option is disabled

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:85:37)

  ● ChordProRenderer › renderMetadata › should handle missing metadata gracefully

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:97:37)

  ● ChordProRenderer › full rendering › should render complete ChordPro document

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:208:37)

  ● ChordProRenderer › full rendering › should preserve original text when requested

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:220:37)

FAIL tests/components/editor/LineRenderer.test.tsx
  LineRenderer
    TextLineRenderer
      ✓ renders text line without chords (11 ms)
      ✓ renders text line with chords above (default) (3 ms)
      ✓ renders text line with inline chords (3 ms)
    EmptyLineRenderer
      ✓ renders single empty line by default (5 ms)
      ✓ renders multiple empty lines when count is specified (51 ms)
    AnnotationLineRenderer
      ✓ renders comment annotation (5 ms)
      ✓ renders instruction annotation with proper styling (4 ms)
      ✓ renders tempo annotation (2 ms)
      ✓ renders dynamics annotation (3 ms)
    LineRenderer (main component)
      ✕ renders text line correctly (3 ms)
      ✕ renders empty line correctly (3 ms)
      ✕ renders annotation line correctly (2 ms)
      ✓ renders fallback for unknown line types (1 ms)

  ● LineRenderer › LineRenderer (main component) › renders text line correctly

    TestingLibraryElementError: Unable to find an element with the text: Test text. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded "[39m
        [36m>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs font-medium"[39m
          [36m>[39m
            [0mUnknown line type:[0m
          [36m</span>[39m
          [36m<pre[39m
            [33mclass[39m=[32m"text-xs mt-1"[39m
          [36m>[39m
            [0m{
      "type": "text",
      "text": "Test text",
      "chords": [],
      "lineNumber": 1
    }[0m
          [36m</pre>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      182 |       render(<LineRenderer line={line} />);
      183 |       
    > 184 |       expect(screen.getByText('Test text')).toBeInTheDocument();
          |                     ^
      185 |     });
      186 |
      187 |     it('renders empty line correctly', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/LineRenderer.test.tsx:184:21)

  ● LineRenderer › LineRenderer (main component) › renders empty line correctly

    expect(received).toBeInTheDocument()

    received value must be an HTMLElement or an SVGElement.
    Received has value: null

      195 |       
      196 |       const emptyLineElement = container.querySelector('.empty-line');
    > 197 |       expect(emptyLineElement).toBeInTheDocument();
          |                                ^
      198 |       expect(emptyLineElement).toHaveAttribute('role', 'presentation');
      199 |     });
      200 |

      at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
      at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
      at Object.<anonymous> (tests/components/editor/LineRenderer.test.tsx:197:32)

  ● LineRenderer › LineRenderer (main component) › renders annotation line correctly

    TestingLibraryElementError: Unable to find an element with the text: Test annotation. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded "[39m
        [36m>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs font-medium"[39m
          [36m>[39m
            [0mUnknown line type:[0m
          [36m</span>[39m
          [36m<pre[39m
            [33mclass[39m=[32m"text-xs mt-1"[39m
          [36m>[39m
            [0m{
      "type": "annotation",
      "value": "Test annotation",
      "annotationType": "comment",
      "lineNumber": 1
    }[0m
          [36m</pre>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      209 |       render(<LineRenderer line={line} />);
      210 |       
    > 211 |       expect(screen.getByText('Test annotation')).toBeInTheDocument();
          |                     ^
      212 |     });
      213 |
      214 |     it('renders fallback for unknown line types', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/LineRenderer.test.tsx:211:21)

PASS tests/components/animations/FormatTransition.test.tsx
  FormatTransition
    ✓ renders current format correctly (7 ms)
    ✓ shows previous format when provided (6 ms)
    ✓ displays progress indicator (2 ms)
    ✓ applies custom className (2 ms)
    ✓ handles different transition types (4 ms)
  useFormatTransition
    ✓ manages format transition state correctly (3 ms)
    ✓ changes format correctly (4 ms)
    ✓ tracks previous format correctly (47 ms)
    ✓ resets transition correctly (7 ms)
    ✓ ignores same format changes (5 ms)
  PresetFormatTransition
    ✓ renders with smooth preset (4 ms)
    ✓ renders with quick preset (3 ms)
    ✓ renders with dramatic preset (4 ms)
    ✓ applies custom className (4 ms)

PASS tests/types/error.test.ts
  Error Types
    ErrorType enum
      ✓ should have all required error types (2 ms)
      ✓ should have exactly 6 error types
      ✓ should contain only string values (1 ms)
    AppError interface
      ✓ should accept valid error objects with all properties (1 ms)
      ✓ should accept error with only required properties (1 ms)
      ✓ should accept all error types (1 ms)
      ✓ should accept various context types (1 ms)
    Result type
      ✓ should accept successful results
      ✓ should accept error results (1 ms)
      ✓ should work with different data types (1 ms)
      ✓ should work with custom error types
    ValidationResult interface
      ✓ should accept valid validation results (1 ms)
      ✓ should accept invalid validation results
      ✓ should accept validation result without warnings (1 ms)
      ✓ should accept validation result with empty arrays (1 ms)

PASS src/renderers/__tests__/renderer-factory.test.ts
  RendererFactory
    getInstance
      ✓ should return singleton instance (2 ms)
    createRenderer
      ✓ should create ChordPro renderer
      ✓ should create OnSong renderer (1 ms)
      ✓ should create Songbook renderer (1 ms)
      ✓ should create Guitar Tabs renderer
      ✓ should create Nashville renderer (1 ms)
      ✓ should throw error for unsupported format (6 ms)
    getSupportedFormats
      ✓ should return all supported formats (1 ms)
    isFormatSupported
      ✓ should return true for supported formats (1 ms)
      ✓ should return false for unsupported formats
    getRenderer
      ✓ should return renderer for supported format (1 ms)
      ✓ should return null for unsupported format (1 ms)
    registerRenderer
      ✓ should register custom renderer (1 ms)
      ✓ should override existing renderer
    unregisterRenderer
      ✓ should unregister existing renderer (1 ms)
      ✓ should return false for non-existent renderer (1 ms)
      ✓ should not affect other renderers

PASS tests/types/chordsheet.test.ts
  ChordSheet Types
    ChordSheet interface
      ✓ should accept valid chord sheet objects (3 ms)
      ✓ should accept chord sheet with optional properties undefined (8 ms)
      ✓ should accept all notation formats (1 ms)
      ✓ should accept chord sheet with multiple sections (1 ms)
      ✓ should accept chord sheet with complex metadata (1 ms)
      ✓ should require all mandatory properties (1 ms)
      ✓ should maintain consistency between convenience properties and metadata (1 ms)

FAIL tests/services/diverse/__tests__/file-operations-e2e.test.ts
  ● Test suite failed to run

    Cannot find module '../services/file-operations' from 'tests/services/diverse/__tests__/file-operations-e2e.test.ts'

    > 1 | import { FileOperations } from '../services/file-operations';
        | ^
      2 | import { ConversionEngine } from '../services/conversion-engine-old/conversion-engine';
      3 | import { NotationFormat } from '../types';
      4 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/diverse/__tests__/file-operations-e2e.test.ts:1:1)

PASS tests/components/animations/ChordTransition.test.tsx
  ChordTransition
    ✓ renders chord transitions correctly (8 ms)
    ✓ applies correct styling for changing chords (4 ms)
    ✓ positions chords correctly (6 ms)
    ✓ has proper accessibility attributes (4 ms)
    ✓ applies custom className (3 ms)
  useChordTransition
    ✓ manages transition state correctly (3 ms)
    ✓ starts transition correctly (3 ms)
    ✓ completes transition correctly (3 ms)
  calculateChordPositions
    ✓ calculates positions correctly for single line (1 ms)
    ✓ calculates positions correctly for multiple lines (1 ms)
    ✓ handles empty text (1 ms)
    ✓ handles different font sizes

FAIL tests/services/conversion/format-detector-samples.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/services/conversion-engine/format-detector' from 'tests/services/conversion/format-detector-samples.test.ts'

      2 | import { expect } from '@playwright/test';
      3 |
    > 4 | import { FormatDetector } from '../../../src/services/conversion-engine/format-detector';
        | ^
      5 | import { NotationFormat } from '../../../src/types';
      6 |
      7 | describe('FormatDetector - Real World Samples', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/format-detector-samples.test.ts:4:1)

PASS tests/types/index.test.ts
  Types Index
    Format Types Exports
      ✓ should export NotationFormat enum (2 ms)
      ✓ should export SectionType enum (1 ms)
      ✓ should export AnnotationFormat enum (1 ms)
    Core Data Model Exports
      ✓ should export Chord interface (1 ms)
      ✓ should export Annotation interface
      ✓ should export Section interface (1 ms)
      ✓ should export Metadata interface (1 ms)
      ✓ should export ChordSheet interface (1 ms)
    Error Handling Exports
      ✓ should export ErrorType enum (1 ms)
      ✓ should export AppError interface
      ✓ should export Result type (1 ms)
      ✓ should export ValidationResult interface (1 ms)
    Type Integration
      ✓ should allow creating complex objects using all exported types (1 ms)

PASS src/hooks/__tests__/useResponsive.test.ts
  useResponsive
    ✓ returns desktop breakpoint for large screens (5 ms)
    ✓ returns tablet breakpoint for medium screens (2 ms)
    ✓ returns mobile breakpoint for small screens (53 ms)
    ✓ handles breakpoint boundaries correctly (4 ms)
    ✓ updates state when window is resized (2 ms)
    ✓ adds and removes resize event listener (2 ms)
    ✓ handles server-side rendering gracefully (1 ms)

FAIL tests/services/conversion/conversion-engine.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../src/services/conversion-engine-old/conversion-engine' from 'tests/services/conversion/conversion-engine.test.ts'

    > 1 | import { ConversionEngine } from '../../../../src/services/conversion-engine-old/conversion-engine';
        | ^
      2 | import { NotationFormat } from '../../../src/types';
      3 |
      4 | describe('ConversionEngine', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/conversion-engine.test.ts:1:1)

PASS tests/types/section.test.ts
  Section Types
    Section interface
      ✓ should accept valid section objects (2 ms)
      ✓ should accept section with empty chords and annotations (1 ms)
      ✓ should accept all section types (1 ms)
      ✓ should accept section with multiple chords (1 ms)
      ✓ should accept section with multiple annotations (1 ms)
      ✓ should require all mandatory properties

PASS tests/types/metadata.test.ts
  Metadata Types
    Metadata interface
      ✓ should accept valid metadata objects with all properties (2 ms)
      ✓ should accept metadata with only some properties (1 ms)
      ✓ should accept empty metadata object (1 ms)
      ✓ should accept various time signatures (1 ms)
      ✓ should accept various key signatures (2 ms)
      ✓ should accept custom metadata with various types (53 ms)
      ✓ should accept reasonable tempo values (1 ms)
      ✓ should accept reasonable capo values (2 ms)

PASS src/hooks/__tests__/useDebounce.test.ts
  useDebounce
    ✓ should return initial value immediately (4 ms)
    ✓ should debounce value changes (3 ms)
    ✓ should reset timer on rapid changes (2 ms)
    ✓ should handle different delay values (1 ms)
    ✓ should handle different value types (2 ms)
    ✓ should handle object values (2 ms)

FAIL tests/types/format.test.ts
  Format Types
    NotationFormat enum
      ✓ should have all required notation formats (2 ms)
      ✓ should have exactly 6 notation formats
      ✓ should contain only string values (2 ms)
    SectionType enum
      ✓ should have all required section types (1 ms)
      ✕ should have exactly 11 section types (1 ms)
      ✓ should contain only string values (1 ms)
    AnnotationFormat enum
      ✓ should have all required annotation formats
      ✓ should have exactly 5 annotation formats (1 ms)
      ✓ should contain only string values (1 ms)

  ● Format Types › SectionType enum › should have exactly 11 section types

    expect(received).toHaveLength(expected)

    Expected length: 11
    Received length: 14
    Received array:  ["verse", "chorus", "bridge", "intro", "outro", "instrumental", "pre_chorus", "post_chorus", "tag", "vamp", …]

      41 |     it('should have exactly 11 section types', () => {
      42 |       const sectionValues = Object.values(SectionType);
    > 43 |       expect(sectionValues).toHaveLength(11);
         |                             ^
      44 |     });
      45 |
      46 |     it('should contain only string values', () => {

      at Object.<anonymous> (tests/types/format.test.ts:43:29)

FAIL tests/services/conversion/chord-pro.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/chord-pro' from 'tests/services/conversion/chord-pro.test.ts'

      1 | import { describe, it } from 'node:test';
      2 | import { expect } from '@playwright/test';
    > 3 | import { ChordProParser } from '../../../src/parsers/annotations/chord-pro';
        | ^
      4 | import { AnnotationFormat } from '../../../src/types';
      5 |
      6 | describe('ChordProParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/chord-pro.test.ts:3:1)

FAIL tests/services/conversion/guitar-tabs.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/guitar-tabs' from 'tests/services/conversion/guitar-tabs.test.ts'

    > 1 | import { GuitarTabsParser } from '../../../src/parsers/annotations/guitar-tabs';
        | ^
      2 | import { AnnotationFormat } from '../../../src/types';
      3 |
      4 | describe('GuitarTabsParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/guitar-tabs.test.ts:1:1)

FAIL tests/services/conversion/planning-center.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/planning-center' from 'tests/services/conversion/planning-center.test.ts'

    > 1 | import { PlanningCenterParser } from '../../../src/parsers/annotations/planning-center';
        | ^
      2 | import { AnnotationFormat } from '../../../src/types';
      3 |
      4 | describe('PlanningCenterParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/planning-center.test.ts:1:1)

FAIL tests/services/conversion/songbook.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/songbook' from 'tests/services/conversion/songbook.test.ts'

    > 1 | import { SongbookParser } from '../../../src/parsers/annotations/songbook';
        | ^
      2 | import { AnnotationFormat } from '../../../src/types';
      3 |
      4 | describe('SongbookParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/songbook.test.ts:1:1)

FAIL tests/services/conversion/on-song.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/on-song' from 'tests/services/conversion/on-song.test.ts'

    > 1 | import { OnSongParser } from '../../../src/parsers/annotations/on-song';
        | ^
      2 | import { AnnotationFormat } from '../../../src/types';
      3 |
      4 | describe('OnSongParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/on-song.test.ts:1:1)

FAIL src/tests/global-setup.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/tests/global-teardown.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/services/conversion/songbook-parser.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/components/integration/MusicConverter.integration.test.tsx
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

Summary of all failing tests
FAIL src/renderers/__tests__/comprehensive-renderer.test.ts
  ● Comprehensive Renderer Tests › EmptyLine Rendering Across All Formats › should render single empty lines correctly in all formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:209:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:207:15)

  ● Comprehensive Renderer Tests › EmptyLine Rendering Across All Formats › should render multiple consecutive empty lines correctly

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:221:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:219:15)

  ● Comprehensive Renderer Tests › AnnotationLine Rendering Across All Formats › should render comment annotations correctly in all formats

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:305:47)

  ● Comprehensive Renderer Tests › AnnotationLine Rendering Across All Formats › should render tempo annotations with format-specific styling

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at OnSongRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at OnSongRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at OnSongRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:375:43)

  ● Comprehensive Renderer Tests › Chord Placement Accuracy Tests › should place chords above text for above-placement formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:422:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:420:20)

  ● Comprehensive Renderer Tests › Chord Placement Accuracy Tests › should place chords inline for inline-placement formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:438:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:436:21)

  ● Comprehensive Renderer Tests › Chord Placement Accuracy Tests › should handle mixed chord placements correctly

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:447:31)

  ● Comprehensive Renderer Tests › Chord Placement Accuracy Tests › should maintain chord position accuracy with complex chords

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:489:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:487:15)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should apply format-specific spacing for ChordPro

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:500:31)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should apply format-specific spacing for OnSong

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at OnSongRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at OnSongRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at OnSongRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:509:31)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should apply format-specific spacing for Songbook

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:518:31)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should maintain consistent section spacing

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:530:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:528:15)

  ● Comprehensive Renderer Tests › Whitespace Rule Validation Tests › should handle annotation spacing correctly

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:540:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid ChordPro output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:550:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid OnSong output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at OnSongRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at OnSongRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at OnSongRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:560:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid Songbook output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:571:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid Guitar Tabs output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at GuitarTabsRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at GuitarTabsRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at GuitarTabsRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:581:31)

  ● Comprehensive Renderer Tests › Format-Specific Output Validation › should generate valid Nashville output

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at NashvilleRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at NashvilleRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at NashvilleRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:591:31)

  ● Comprehensive Renderer Tests › Rendering Performance and Metadata › should provide accurate rendering metadata

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:605:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:603:15)

  ● Comprehensive Renderer Tests › Rendering Performance and Metadata › should handle rendering options correctly

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:623:31)

  ● Comprehensive Renderer Tests › Rendering Performance and Metadata › should maintain performance with large chordsheets

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:659:31)

  ● Comprehensive Renderer Tests › Error Handling and Edge Cases › should handle empty chordsheets gracefully

    Cannot render chordsheet in songbook format

      74 |         
      75 |         if (!this.canRender(chordsheet)) {
    > 76 |             throw new Error(`Cannot render chordsheet in ${this.format} format`);
         |                   ^
      77 |         }
      78 |
      79 |         const mergedOptions = this.mergeOptions(options);

      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:76:19)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:681:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:679:15)

  ● Comprehensive Renderer Tests › Error Handling and Edge Cases › should handle chordsheets with only empty lines

    Unknown line type: empty

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:707:33
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:705:15)

  ● Comprehensive Renderer Tests › Error Handling and Edge Cases › should handle malformed chord data gracefully

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "Unknown line type: text"

          21 |         }
          22 |         
        > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
             |               ^
          24 |     }
          25 |
          26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:742:31
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:742:64
                at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:740:15)
      at src/renderers/__tests__/comprehensive-renderer.test.ts:742:64
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/comprehensive-renderer.test.ts:740:15)

FAIL tests/e2e/accessibility.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('Accessibility Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/accessibility.spec.ts:3:6)

FAIL tests/components/editor/OutputPreview.test.tsx
  ● OutputPreview › Basic Rendering › renders empty state when no content is provided

    TestingLibraryElementError: Unable to find an element with the text: No content to preview. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      133 |       );
      134 |
    > 135 |       expect(screen.getByText('No content to preview')).toBeInTheDocument();
          |                     ^
      136 |       expect(screen.getByText(/Enter or paste your chord sheet content/)).toBeInTheDocument();
      137 |     });
      138 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:135:21)

  ● OutputPreview › Basic Rendering › displays the provided string value (legacy support)

    TestingLibraryElementError: Unable to find an element with the text: Converted chord sheet content. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      145 |       );
      146 |
    > 147 |       expect(screen.getByText(testValue)).toBeInTheDocument();
          |                     ^
      148 |     });
      149 |
      150 |     it('displays Preview header', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:147:21)

  ● OutputPreview › Basic Rendering › displays Preview header

    TestingLibraryElementError: Unable to find an element with the text: Preview. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      155 |       );
      156 |
    > 157 |       expect(screen.getByText('Preview')).toBeInTheDocument();
          |                     ^
      158 |     });
      159 |
      160 |     it('applies custom className', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:157:21)

  ● OutputPreview › Basic Rendering › applies custom className

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      paragraph:

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 custom-class"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      168 |       // If the component passes the className to its main container, this should work.
      169 |       // If OutputPreview's root element is a div with role='main', this is a good selector.
    > 170 |       const previewContainer = screen.getByRole('main');
          |                                       ^
      171 |       expect(previewContainer).toHaveClass('custom-class');
      172 |     });
      173 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:170:39)

  ● OutputPreview › Chordsheet Rendering › renders chordsheet with metadata

    TestingLibraryElementError: Unable to find an element with the text: Amazing Grace. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      195 |       );
      196 |
    > 197 |       expect(screen.getByText('Amazing Grace')).toBeInTheDocument();
          |                     ^
      198 |       expect(screen.getByText('by John Newton')).toBeInTheDocument();
      199 |       expect(screen.getByText('Key: C')).toBeInTheDocument();
      200 |       expect(screen.getByText('Verse 1')).toBeInTheDocument();

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:197:21)

  ● OutputPreview › Chordsheet Rendering › renders sections without chordsheet wrapper

    TestingLibraryElementError: Unable to find an element with the text: Chorus. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      216 |       );
      217 |
    > 218 |       expect(screen.getByText('Chorus')).toBeInTheDocument();
          |                     ^
      219 |       expect(screen.getByText('How sweet the sound')).toBeInTheDocument();
      220 |     });
      221 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:218:21)

  ● OutputPreview › Chordsheet Rendering › prioritizes chordsheet over sections over string value

    TestingLibraryElementError: Unable to find an element with the text: Test Song. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      241 |       );
      242 |
    > 243 |       expect(screen.getByText('Test Song')).toBeInTheDocument();
          |                     ^
      244 |       expect(screen.queryByText('Section text')).not.toBeInTheDocument();
      245 |       expect(screen.queryByText('String value')).not.toBeInTheDocument();
      246 |     });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:243:21)

  ● OutputPreview › Chordsheet Rendering › handles compact mode

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      paragraph:

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      262 |       // In compact mode, sections should have less spacing.
      263 |       // Assuming the 'main' role element is the container that gets this class.
    > 264 |       const sectionContainer = screen.getByRole('main');
          |                                       ^
      265 |       expect(sectionContainer).toHaveClass('space-y-3');
      266 |     });
      267 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:264:39)

  ● OutputPreview › Loading and Error States › shows loading overlay when isLoading is true

    TestingLibraryElementError: Unable to find an element with the text: Converting.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      276 |
      277 |       // Check for the visible "Converting..." text and the screen reader text
    > 278 |       expect(screen.getAllByText('Converting...')).toHaveLength(2); // One visible, one for screen readers
          |                     ^
      279 |       expect(screen.getByText('Some content')).toBeInTheDocument();
      280 |     });
      281 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:278:21)

  ● OutputPreview › Loading and Error States › shows progress indicator when progress is provided

    TestingLibraryElementError: Unable to find an element with the text: Processing.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      287 |       );
      288 |
    > 289 |       expect(screen.getByText('Processing...')).toBeInTheDocument();
          |                     ^
      290 |       expect(screen.getByRole('progressbar')).toHaveAttribute('aria-valuenow', '50');
      291 |     });
      292 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:289:21)

  ● OutputPreview › Loading and Error States › displays error message when error is provided

    TestingLibraryElementError: Unable to find an element with the text: Test error message. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      299 |       );
      300 |
    > 301 |       expect(screen.getByText(errorMessage)).toBeInTheDocument();
          |                     ^
      302 |     });
      303 |
      304 |     it('prioritizes error display over loading', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:301:21)

  ● OutputPreview › Loading and Error States › prioritizes error display over loading

    TestingLibraryElementError: Unable to find an element with the text: Test error. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      310 |       );
      311 |
    > 312 |       expect(screen.getByText(errorMessage)).toBeInTheDocument();
          |                     ^
      313 |       expect(screen.queryByText('Converting...')).not.toBeInTheDocument();
      314 |     });
      315 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:312:21)

  ● OutputPreview › SOLID Architecture Integration › should publish preview update events

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"chordsheet": {"id": "test-1", "originalKey": "C", "sections": [], "title": "Test Song"}}, "type": "PreviewUpdated"}

    Number of calls: 0

      330 |       );
      331 |
    > 332 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
          |                                        ^
      333 |         expect.objectContaining({
      334 |           type: 'PreviewUpdated',
      335 |           data: expect.objectContaining({

      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:332:40)

  ● OutputPreview › SOLID Architecture Integration › should auto-save preview content when enabled

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"chordsheet": {"id": "test-1", "originalKey": "C", "sections": [], "title": "Test Song"}}

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-4xl mb-2"[39m
              [36m>[39m
                [0m��[0m
              [36m</div>[39m
              [36m<p>[39m
                [0mConverted output will appear here[0m
              [36m</p>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      355 |
      356 |       await waitFor(() => {
    > 357 |         expect(mockStorageService.save).toHaveBeenCalledWith(
          |                                         ^
      358 |           expect.any(String), // The key for saving
      359 |           expect.objectContaining({
      360 |             chordsheet: chordsheet

      at tests/components/editor/OutputPreview.test.tsx:357:41
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  ● OutputPreview › SOLID Architecture Integration › should handle conversion errors gracefully

    Unable to find an element with the text: /conversion error/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      376 |       );
      377 |
    > 378 |       await waitFor(() => {
          |                    ^
      379 |         expect(screen.getByText(/conversion error/i)).toBeInTheDocument();
      380 |       });
      381 |

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:378:20)

  ● OutputPreview › SOLID Architecture Integration › should subscribe to conversion events

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "ConversionCompleted", Any<Function>

    Number of calls: 0

      390 |       );
      391 |
    > 392 |       expect(mockEventManager.subscribe).toHaveBeenCalledWith(
          |                                          ^
      393 |         'ConversionCompleted',
      394 |         expect.any(Function)
      395 |       );

      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:392:42)

  ● OutputPreview › SOLID Architecture Integration › should handle real-time updates from conversion engine

    Unable to find an element with the text: Converted content. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      425 |       }
      426 |
    > 427 |       await waitFor(() => {
          |                    ^
      428 |         expect(screen.getByText('Converted content')).toBeInTheDocument();
      429 |       });
      430 |     });

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:427:20)

  ● OutputPreview › Accessibility › has proper accessibility attributes

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      paragraph:

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      452 |       );
      453 |
    > 454 |       expect(screen.getByRole('main')).toHaveAttribute('aria-label', 'Chord sheet preview');
          |                     ^
      455 |       // Assuming the section renders a role="region" with its title as aria-label
      456 |       expect(screen.getByRole('region', { name: 'Verse section' })).toBeInTheDocument();
      457 |     });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:454:21)

  ● OutputPreview › Accessibility › should announce loading state to screen readers

    TestingLibraryElementError: Unable to find an element with the text: /Converting content/i, which matches selector '.sr-only'. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      465 |
      466 |       // This expects a visually hidden element with aria-live="polite" and the text "Converting content"
    > 467 |       const loadingAnnouncement = screen.getByText(/Converting content/i, { selector: '.sr-only' });
          |                                          ^
      468 |       expect(loadingAnnouncement).toHaveAttribute('aria-live', 'polite');
      469 |     });
      470 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:467:42)

  ● OutputPreview › Accessibility › should announce errors to screen readers

    TestingLibraryElementError: Unable to find an element with the text: /Error occurred/i, which matches selector '.sr-only'. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      478 |
      479 |       // This expects a visually hidden element with aria-live="assertive" and the text "Error occurred"
    > 480 |       const errorAnnouncement = screen.getByText(/Error occurred/i, { selector: '.sr-only' });
          |                                        ^
      481 |       expect(errorAnnouncement).toHaveAttribute('aria-live', 'assertive');
      482 |     });
      483 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:480:40)

  ● OutputPreview › Accessibility › should support keyboard navigation

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      paragraph:

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      501 |       );
      502 |
    > 503 |       const previewContainer = screen.getByRole('main');
          |                                       ^
      504 |       expect(previewContainer).toHaveAttribute('tabIndex', '0');
      505 |     });
      506 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:503:39)

  ● OutputPreview › Performance › should cleanup event subscriptions on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      545 |
      546 |       // Expect unsubscribe to have been called at least once
    > 547 |       expect(mockEventManager.unsubscribe).toHaveBeenCalled();
          |                                            ^
      548 |     });
      549 |
      550 |     it('should handle large chordsheets efficiently', () => {

      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:547:44)

  ● OutputPreview › Performance › should handle large chordsheets efficiently

    TestingLibraryElementError: Unable to find an element with the text: Large Song. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      568 |       );
      569 |
    > 570 |       expect(screen.getByText('Large Song')).toBeInTheDocument();
          |                     ^
      571 |       expect(screen.getByText('Verse 1')).toBeInTheDocument();
      572 |       // Optionally, you could add a performance assertion here, e.g., checking render time
      573 |       // or number of DOM nodes, but that's more advanced.

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:570:21)

  ● OutputPreview › Error Handling › should handle missing services gracefully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      597 |       // You might want to add an assertion here, e.g., expect(screen.getByText('Error loading services')).toBeInTheDocument();
      598 |       // if your component provides such a fallback.
    > 599 |       expect(consoleSpy).toHaveBeenCalled(); // Expect console error if services are null
          |                          ^
      600 |
      601 |       consoleSpy.mockRestore();
      602 |     });

      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:599:26)

  ● OutputPreview › Error Handling › should handle malformed chordsheet data

    TestingLibraryElementError: Unable to find an element with the text: /invalid chordsheet data/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"h-80 flex items-center justify-center text-gray-400 dark:text-gray-500 "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-4xl mb-2"[39m
            [36m>[39m
              [0m��[0m
            [36m</div>[39m
            [36m<p>[39m
              [0mConverted output will appear here[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      617 |
      618 |       // Expect the component to display an error message for malformed data
    > 619 |       expect(screen.getByText(/invalid chordsheet data/i)).toBeInTheDocument();
          |                     ^
      620 |     });
      621 |   });
      622 | });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/OutputPreview.test.tsx:619:21)

FAIL src/renderers/__tests__/integration.test.ts
  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to ChordPro format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:172:37)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to OnSong format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at OnSongRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at OnSongRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at OnSongRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:186:37)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to Songbook format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:200:37)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to Guitar Tabs format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at GuitarTabsRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at GuitarTabsRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at GuitarTabsRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:216:37)

  ● Rendering Engine Integration Tests › Cross-Format Rendering › should render to Nashville format correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at NashvilleRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at NashvilleRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at NashvilleRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:232:37)

  ● Rendering Engine Integration Tests › Empty Line Handling › should handle single empty lines correctly across formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:257:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:255:21)

  ● Rendering Engine Integration Tests › Empty Line Handling › should handle multiple consecutive empty lines correctly

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:275:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:273:21)

  ● Rendering Engine Integration Tests › Annotation Handling › should handle different annotation types across formats

    Unknown line type: annotation

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:331:53)

  ● Rendering Engine Integration Tests › Chord Placement › should use inline placement for inline formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:362:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:360:27)

  ● Rendering Engine Integration Tests › Chord Placement › should use above placement for above formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at SongbookRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at SongbookRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at SongbookRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:377:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:375:26)

  ● Rendering Engine Integration Tests › Original Text Preservation › should preserve original text when requested

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:396:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:394:21)

  ● Rendering Engine Integration Tests › Performance and Metadata › should provide rendering metadata for all formats

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at src/renderers/__tests__/integration.test.ts:417:41
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:415:21)

  ● Rendering Engine Integration Tests › Performance and Metadata › should handle large chordsheets efficiently

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/integration.test.ts:458:37)

FAIL tests/e2e/performance.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('Performance Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/performance.spec.ts:3:6)

FAIL tests/services/conversion/comprehensive-integration.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../src/services/conversion-engine-old/conversion-engine' from 'tests/services/conversion/comprehensive-integration.test.ts'

      1 | import { describe, it, expect, beforeEach, afterEach } from '@jest/globals';
    > 2 | import { ConversionEngine } from '../../../../src/services/conversion-engine-old/conversion-engine';
        | ^
      3 | import { FormatDetector } from '../format-detector';
      4 | import { FileOperations } from '../../../src/services/file-operations';
      5 | import { NotationFormat } from '../../../src/types/format';

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/comprehensive-integration.test.ts:2:1)

FAIL tests/e2e/ui-functionality.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('UI Functionality Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/ui-functionality.spec.ts:3:6)

FAIL tests/services/diverse/__tests__/auto-key-detection.test.ts
  ● Test suite failed to run

    Cannot find module '../utils/chord-parser' from 'src/services/key-detector.ts'

    Require stack:
      src/services/key-detector.ts
      tests/services/diverse/__tests__/auto-key-detection.test.ts

      1 | import { Chord } from '../types';
    > 2 | import { ChordParser } from '../utils/chord-parser';
        | ^
      3 | import { MAJOR_KEY_SIGNATURES, MINOR_KEY_SIGNATURES, NASHVILLE_MAJOR_MAPPINGS } from '../constants/chord-mappings';
      4 |
      5 | /**

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (src/services/key-detector.ts:2:1)
      at Object.<anonymous> (tests/services/diverse/__tests__/auto-key-detection.test.ts:1:1)

FAIL tests/e2e/visual-regression.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('Visual Regression Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/visual-regression.spec.ts:3:6)

FAIL tests/types/validation.test.ts
  ● Validation Utilities › validateLines › should reject array with invalid lines

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      270 |
      271 |             const result = validateLines(invalidLines);
    > 272 |             expect(result.valid).toBe(false);
          |                                  ^
      273 |             expect(result.errors.some(e => e.field === 'lines[1]')).toBe(true);
      274 |         });
      275 |     });

      at Object.<anonymous> (tests/types/validation.test.ts:272:34)

FAIL tests/components/controls/KeySelector.test.tsx
  ● KeySelector › Basic Rendering › displays key options from transposer service

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      107 |       
      108 |       // Verify that keys are loaded from the service
    > 109 |       expect(mockKeyTransposer.getAvailableKeys).toHaveBeenCalled();
          |                                                  ^
      110 |     });
      111 |
      112 |     it('shows the selected value', () => {

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:109:50)

  ● KeySelector › Basic Rendering › includes both major and minor keys

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      137 |       
      138 |       // Verify the component requests available keys
    > 139 |       expect(mockKeyTransposer.getAvailableKeys).toHaveBeenCalled();
          |                                                  ^
      140 |       
      141 |       // The actual key options will be populated from the mock
      142 |       const select = screen.getByRole('combobox');

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:139:50)

  ● KeySelector › Key Selection › is disabled when disabled prop is true

    expect(element).toBeDisabled()

    Received element is not disabled:
      <select class="
              w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600·
              rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500·
              text-gray-900 dark:text-white text-sm transition-colors
            " />

      176 |       
      177 |       const select = screen.getByRole('combobox');
    > 178 |       expect(select).toBeDisabled();
          |                      ^
      179 |     });
      180 |
      181 |     it('updates display when key changes', () => {

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:178:22)

  ● KeySelector › SOLID Architecture Integration › should get available keys from key transposer

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      217 |       );
      218 |       
    > 219 |       expect(mockKeyTransposer.getAvailableKeys).toHaveBeenCalled();
          |                                                  ^
      220 |     });
      221 |
      222 |     it('should publish key change events', async () => {

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:219:50)

  ● KeySelector › SOLID Architecture Integration › should publish key change events

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"newKey": "G", "oldKey": "C"}, "type": "KeyChanged"}

    Number of calls: 0

      234 |       fireEvent.change(select, { target: { value: 'G' } });
      235 |       
    > 236 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
          |                                        ^
      237 |         expect.objectContaining({
      238 |           type: 'KeyChanged',
      239 |           data: expect.objectContaining({

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:236:40)

  ● KeySelector › SOLID Architecture Integration › should validate key selection through transposer service

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "InvalidKey"
    Received: ""

    Number of calls: 1

      262 |       
      263 |       // Component should still call onChange even with invalid key
    > 264 |       expect(mockOnChange).toHaveBeenCalledWith('InvalidKey');
          |                            ^
      265 |       
      266 |       // Reset mock for other tests
      267 |       mockKeyTransposer.isValidKey.mockReturnValue(true);

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:264:28)

  ● KeySelector › Accessibility › should have proper ARIA attributes

    expect(element).toHaveAttribute("aria-label", Any<String>) // element.getAttribute("aria-label") === Any<String>

    Expected the element to have attribute:
      aria-label=Any<String>
    Received:
      null

      339 |       
      340 |       const select = screen.getByRole('combobox');
    > 341 |       expect(select).toHaveAttribute('aria-label', expect.any(String));
          |                      ^
      342 |     });
      343 |
      344 |     it('should support keyboard navigation', async () => {

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:341:22)

  ● KeySelector › Accessibility › should be accessible to screen readers

    expect(element).toHaveValue(G)

    Expected the element to have value:
      G
    Received:
      C

      379 |       
      380 |       // The component should maintain accessible behavior
    > 381 |       expect(select).toHaveValue('G');
          |                      ^
      382 |     });
      383 |   });
      384 |

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:381:22)

  ● KeySelector › Error Handling › should handle invalid key values

    expect(element).toHaveValue(InvalidKey)

    Expected the element to have value:
      InvalidKey
    Received:
      C

      444 |       const select = screen.getByRole('combobox');
      445 |       expect(select).toBeInTheDocument();
    > 446 |       expect(select).toHaveValue('InvalidKey');
          |                      ^
      447 |     });
      448 |   });
      449 |

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:446:22)

  ● KeySelector › Performance › should cleanup event subscriptions on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      490 |       unmount();
      491 |       
    > 492 |       expect(mockEventManager.unsubscribe).toHaveBeenCalled();
          |                                            ^
      493 |     });
      494 |   });
      495 |

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:492:44)

  ● KeySelector › Props Validation › should handle all common musical keys

    expect(element).toHaveValue(Bb)

    Expected the element to have value:
      Bb
    Received:
      C

      511 |         
      512 |         const select = screen.getByRole('combobox');
    > 513 |         expect(select).toHaveValue(key);
          |                        ^
      514 |         
      515 |         unmount();
      516 |       });

      at tests/components/controls/KeySelector.test.tsx:513:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:501:37)

  ● KeySelector › Props Validation › should support custom key lists

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      546 |       );
      547 |       
    > 548 |       expect(mockKeyTransposer.getAvailableKeys).toHaveBeenCalled();
          |                                                  ^
      549 |       
      550 |       unmount();
      551 |       

      at Object.<anonymous> (tests/components/controls/KeySelector.test.tsx:548:50)

FAIL tests/components/feedback/ProgressIndicator.test.tsx
  ● ProgressIndicator › Basic Rendering › renders linear progress bar by default

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      65 |       render(<ProgressIndicator progress={50} />);
      66 |
    > 67 |       const progressBar = screen.getByRole('progressbar');
         |                                  ^
      68 |       expect(progressBar).toBeInTheDocument();
      69 |       expect(progressBar).toHaveAttribute('aria-valuenow', '50');
      70 |       expect(progressBar).toHaveAttribute('aria-valuemin', '0');

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:67:34)

  ● ProgressIndicator › Basic Rendering › renders circular progress when variant is circular

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      75 |       render(<ProgressIndicator progress={75} variant="circular" />);
      76 |
    > 77 |       const progressBar = screen.getByRole('progressbar');
         |                                  ^
      78 |       expect(progressBar).toBeInTheDocument();
      79 |       expect(progressBar).toHaveAttribute('aria-valuenow', '75');
      80 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:77:34)

  ● ProgressIndicator › Basic Rendering › shows percentage when showPercentage is true

    TestingLibraryElementError: Unable to find an element with the text: Loading. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0m60[0m
              [0m%[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      92 |       render(<ProgressIndicator progress={60} text="Loading" showPercentage={true} />);
      93 |
    > 94 |       expect(screen.getByText('Loading')).toBeInTheDocument();
         |                     ^
      95 |       expect(screen.getByText('(60%)')).toBeInTheDocument();
      96 |     });
      97 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:94:21)

  ● ProgressIndicator › Progress Validation › clamps progress values to 0-100 range

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      101 |       const { rerender } = render(<ProgressIndicator progress={-10} />);
      102 |
    > 103 |       let progressBar = screen.getByRole('progressbar');
          |                                ^
      104 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      105 |
      106 |       rerender(<ProgressIndicator progress={150} />);

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:103:32)

  ● ProgressIndicator › Progress Validation › handles NaN progress values

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      113 |       render(<ProgressIndicator progress={NaN} />);
      114 |
    > 115 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      116 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      117 |     });
      118 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:115:34)

  ● ProgressIndicator › Progress Validation › handles undefined progress values

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      122 |       render(<ProgressIndicator progress={undefined as any} />);
      123 |
    > 124 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      125 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      126 |     });
      127 |   });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:124:34)

  ● ProgressIndicator › Styling and Variants › applies correct size classes

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      132 |
      133 |       // The parent element of the progressbar often holds the size class for linear indicators
    > 134 |       let progressContainer = screen.getByRole('progressbar').parentElement;
          |                                      ^
      135 |       expect(progressContainer).toHaveClass('h-1');
      136 |
      137 |       rerender(<ProgressIndicator progress={50} size="lg" />);

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:134:38)

  ● ProgressIndicator › Styling and Variants › applies custom className

    TestingLibraryElementError: Unable to find an accessible element with the role "status"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full custom-class"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      145 |
      146 |       // The outermost container often has the custom className
    > 147 |       const container = screen.getByRole('status');
          |                                ^
      148 |       expect(container).toHaveClass('custom-class');
      149 |     });
      150 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:147:32)

  ● ProgressIndicator › Styling and Variants › applies different color schemes

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      153 |       const { rerender } = render(<ProgressIndicator progress={50} color="green" />);
      154 |
    > 155 |       let progressBar = screen.getByRole('progressbar');
          |                                ^
      156 |       expect(progressBar).toHaveClass('bg-green-500');
      157 |
      158 |       // Using 'orange' as it's an allowed color and maps to bg-orange-500

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:155:32)

  ● ProgressIndicator › Accessibility › has proper accessibility attributes

    TestingLibraryElementError: Unable to find an accessible element with the role "status"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      174 |       render(<ProgressIndicator progress={40} text="Processing" />);
      175 |
    > 176 |       const status = screen.getByRole('status');
          |                             ^
      177 |       expect(status).toHaveAttribute('aria-live', 'polite');
      178 |
      179 |       const progressBar = screen.getByRole('progressbar');

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:176:29)

  ● ProgressIndicator › Accessibility › handles progress without text

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      188 |       render(<ProgressIndicator progress={25} />);
      189 |
    > 190 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      191 |       expect(progressBar).toBeInTheDocument();
      192 |
      193 |       const srText = screen.getByText('Progress: 25 percent complete');

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:190:34)

  ● ProgressIndicator › Accessibility › provides proper ARIA labels for different states

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      198 |       const { rerender } = render(<ProgressIndicator progress={0} text="Starting" />);
      199 |
    > 200 |       let progressBar = screen.getByRole('progressbar');
          |                                ^
      201 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      202 |
      203 |       rerender(<ProgressIndicator progress={100} text="Complete" />);

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:200:32)

  ● ProgressIndicator › Event Integration › should publish progress events when progress changes

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"progress": 50}, "type": "ProgressUpdated"}

    Number of calls: 0

      214 |       rerender(<ProgressIndicator progress={50} />);
      215 |
    > 216 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
          |                                        ^
      217 |         expect.objectContaining({
      218 |           type: 'ProgressUpdated',
      219 |           data: expect.objectContaining({

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:216:40)

  ● ProgressIndicator › Event Integration › should publish completion events when progress reaches 100

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"type": "ProgressCompleted"}

    Number of calls: 0

      227 |       render(<ProgressIndicator progress={100} />);
      228 |
    > 229 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
          |                                        ^
      230 |         expect.objectContaining({
      231 |           type: 'ProgressCompleted'
      232 |         })

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:229:40)

  ● ProgressIndicator › Event Integration › should subscribe to progress events on mount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      238 |
      239 |       // Expect subscribe to have been called at least once
    > 240 |       expect(mockEventManager.subscribe).toHaveBeenCalled();
          |                                          ^
      241 |     });
      242 |
      243 |     it('should unsubscribe from events on unmount', () => {

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:240:42)

  ● ProgressIndicator › Event Integration › should unsubscribe from events on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      247 |
      248 |       // Expect unsubscribe to have been called at least once
    > 249 |       expect(mockEventManager.unsubscribe).toHaveBeenCalled();
          |                                            ^
      250 |     });
      251 |   });
      252 |

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:249:44)

  ● ProgressIndicator › Animation and Transitions › should animate progress changes smoothly

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      255 |       const { rerender } = render(<ProgressIndicator progress={0} animated={true} />);
      256 |
    > 257 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      258 |       expect(progressBar).toHaveClass('transition-all'); // Check for the transition class
      259 |
      260 |       rerender(<ProgressIndicator progress={75} animated={true} />);

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:257:34)

  ● ProgressIndicator › Animation and Transitions › should respect reduced motion preferences

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      284 |       render(<ProgressIndicator progress={50} animated={true} />);
      285 |
    > 286 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      287 |       // If prefers-reduced-motion is true, the transition class should NOT be present
      288 |       expect(progressBar).not.toHaveClass('transition-all');
      289 |     });

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:286:34)

  ● ProgressIndicator › Performance › should handle rapid progress updates efficiently

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      312 |       jest.runAllTimers();
      313 |
    > 314 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      315 |       // The last value rendered should be the last one passed, or the one after debounce
      316 |       // If the component itself has debouncing on rendering, this might need adjustment.
      317 |       // Assuming the component updates its internal state immediately and debounces event publishing.

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:314:34)

  ● ProgressIndicator › Performance › should debounce progress events

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      338 |
      339 |       // After advancing timers, only one event should have been published with the last value
    > 340 |       expect(mockEventManager.publish).toHaveBeenCalledTimes(1);
          |                                        ^
      341 |       expect(mockEventManager.publish).toHaveBeenCalledWith(
      342 |         expect.objectContaining({
      343 |           type: 'ProgressUpdated',

      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:340:40)

  ● ProgressIndicator › Error Handling › should handle invalid progress values gracefully

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      359 |       }).not.toThrow(); // Ensure the component doesn't crash
      360 |
    > 361 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      362 |       // Invalid values should default to 0
      363 |       expect(progressBar).toHaveAttribute('aria-valuenow', '0');
      364 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:361:34)

  ● ProgressIndicator › Error Handling › should recover from event manager errors

    TestingLibraryElementError: Unable to find an accessible element with the role "progressbar"

    There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full "[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between mb-1"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xs text-gray-600 dark:text-gray-400"[39m
            [36m>[39m
              [0mConverting...[0m
            [36m</span>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 overflow-hidden"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"[39m
              [33mstyle[39m=[32m"width: 0%;"[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      380 |       }).not.toThrow();
      381 |
    > 382 |       const progressBar = screen.getByRole('progressbar');
          |                                  ^
      383 |       expect(progressBar).toBeInTheDocument();
      384 |       expect(progressBar).toHaveAttribute('aria-valuenow', '50');
      385 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/feedback/ProgressIndicator.test.tsx:382:34)

FAIL tests/components/editor/InputEditor.test.tsx
  ● Test suite failed to run

    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m105[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m105[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m105[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m105[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m116[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m116[0m           <InputEditor value=\"\" onChange={mockOnChange} placeholder={customPlaceholder} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m116[0m:[93m92[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m116[0m           <InputEditor value=\"\" onChange={mockOnChange} placeholder={customPlaceholder} />
    [7m   [0m [91m                                                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m137[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m137[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m137[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m137[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m149[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m149[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m149[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m149[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m162[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m162[0m           <InputEditor value=\"\" onChange={mockOnChange} disabled={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m162[0m:[93m76[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m162[0m           <InputEditor value=\"\" onChange={mockOnChange} disabled={true} />
    [7m   [0m [91m                                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m173[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m173[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m173[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m173[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m190[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m190[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m190[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m190[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m205[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m205[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m205[0m:[93m84[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m205[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                                                                                   ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m220[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m220[0m           <InputEditor value=\"\" onChange={mockOnChange} validateChords={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m220[0m:[93m82[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m220[0m           <InputEditor value=\"\" onChange={mockOnChange} validateChords={true} />
    [7m   [0m [91m                                                                                 ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m235[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m235[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m235[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m235[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m257[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m257[0m           <InputEditor value=\"\" onChange={mockOnChange} autoSave={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m257[0m:[93m76[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m257[0m           <InputEditor value=\"\" onChange={mockOnChange} autoSave={true} />
    [7m   [0m [91m                                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m284[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m284[0m           <InputEditor value=\"\" onChange={mockOnChange} showFormatDetection={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m284[0m:[93m87[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m284[0m           <InputEditor value=\"\" onChange={mockOnChange} showFormatDetection={true} />
    [7m   [0m [91m                                                                                      ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m301[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m301[0m           <InputEditor value=\"\" onChange={mockOnChange} highlightInvalidChords={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m301[0m:[93m90[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m301[0m           <InputEditor value=\"\" onChange={mockOnChange} highlightInvalidChords={true} />
    [7m   [0m [91m                                                                                         ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m318[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m318[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m318[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m318[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m331[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m331[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m331[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m331[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m348[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m348[0m           <InputEditor value=\"\" onChange={mockOnChange} showFormatDetection={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m348[0m:[93m87[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m348[0m           <InputEditor value=\"\" onChange={mockOnChange} showFormatDetection={true} />
    [7m   [0m [91m                                                                                      ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m371[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m371[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m371[0m:[93m84[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m371[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                                                                                   ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m392[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m392[0m           <InputEditor value=\"\" onChange={mockOnChange} validateChords={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m392[0m:[93m82[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m392[0m           <InputEditor value=\"\" onChange={mockOnChange} validateChords={true} />
    [7m   [0m [91m                                                                                 ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m413[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m413[0m           <InputEditor value=\"\" onChange={mockOnChange} autoSave={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m413[0m:[93m76[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m413[0m           <InputEditor value=\"\" onChange={mockOnChange} autoSave={true} />
    [7m   [0m [91m                                                                           ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m437[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m437[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m437[0m:[93m84[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m437[0m           <InputEditor value=\"\" onChange={mockOnChange} autoDetectFormat={true} />
    [7m   [0m [91m                                                                                   ~[0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m463[0m:[93m30[0m - [91merror[0m[90m TS1127: [0mInvalid character.

    [7m463[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                             [0m
    [96mtests/components/editor/InputEditor.test.tsx[0m:[93m463[0m:[93m60[0m - [91merror[0m[90m TS1382: [0mUnexpected token. Did you mean `{'>'}` or `&gt;`?

    [7m463[0m           <InputEditor value=\"\" onChange={mockOnChange} />
    [7m   [0m [91m                                                           ~[0m

FAIL src/tests/performance/benchmarks.test.ts
  ● Performance Benchmarks › Chord Factory Performance › should create chords efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Chord Factory Performance › should handle complex chord creation efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Chord Factory Performance › should validate chords efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Key Transposition Performance › should transpose chords efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Key Transposition Performance › should calculate key distances efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Key Transposition Performance › should handle batch transposition efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Event System Performance › should handle high-frequency event publishing

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Event System Performance › should handle multiple subscribers efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Memory Usage Benchmarks › should not leak memory during chord creation

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Memory Usage Benchmarks › should handle event subscription/unsubscription without leaks

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Scalability Benchmarks › should scale linearly with chord complexity

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Scalability Benchmarks › should handle increasing numbers of event subscribers efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Comparison with Legacy Implementation › should demonstrate performance improvements

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)

  ● Performance Benchmarks › Stress Testing › should handle extreme loads without crashing

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      22 |
      23 |   beforeAll(() => {
    > 24 |     container = createConfiguredContainer({
         |                                          ^
      25 |       storageType: 'memory',
      26 |       errorRecoveryLevel: 'moderate'
      27 |     });

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:24:42)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'dispose')

      33 |
      34 |   afterAll(() => {
    > 35 |     container.dispose();
         |               ^
      36 |   });
      37 |
      38 |   describe('Chord Factory Performance', () => {

      at Object.<anonymous> (src/tests/performance/benchmarks.test.ts:35:15)

FAIL src/tests/unit/events/event-manager.test.ts
  ● EventManager › subscribe and publish › should subscribe and receive events

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:42:20)

  ● EventManager › subscribe and publish › should handle multiple subscribers for same event

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:59:20)

  ● EventManager › subscribe and publish › should handle multiple events for same subscriber

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:70:20)

  ● EventManager › subscribe and publish › should not call handlers for different event types

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:80:20)

  ● EventManager › unsubscribe › should unsubscribe handlers

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:93:20)

  ● EventManager › unsubscribe › should only unsubscribe specific handler

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:107:20)

  ● EventManager › clear › should clear all event handlers

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:132:20)

  ● EventManager › subscribeToMultiple › should subscribe to multiple event types

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:188:20)

  ● EventManager › unsubscribeFromMultiple › should unsubscribe from multiple event types

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:202:20)

  ● EventManager › subscribeOnce › should unsubscribe after first event

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:215:20)

  ● EventManager › async handlers › should handle async event handlers

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:230:20)

  ● EventManager › async handlers › should handle async handler errors gracefully

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:243:20)

  ● EventManager › error handling › should handle synchronous handler errors gracefully

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:265:20)

  ● EventManager › error handling › should continue processing other handlers after error

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:285:20)

  ● EventManager › handler modification during event processing › should handle handlers being removed during event processing

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:382:20)

  ● EventManager › handler modification during event processing › should handle handlers being added during event processing

    TypeError: Cannot read properties of undefined (reading 'type')

      21 |     }
      22 |
    > 23 |     const eventHandlers = this.handlers.get(event.type);
         |                                                   ^
      24 |     if (!eventHandlers || eventHandlers.size === 0) {
      25 |       return;
      26 |     }

      at EventManager.publish (src/services/events/event-manager.ts:23:51)
      at Object.<anonymous> (src/tests/unit/events/event-manager.test.ts:400:20)

FAIL tests/components/controls/FormatSelector.test.tsx
  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'CHORDPRO')

      22 |   detectFormat: jest.fn(),
      23 |   getSupportedFormats: jest.fn().mockReturnValue([
    > 24 |     NotationFormat.CHORDPRO,
         |                    ^
      25 |     NotationFormat.ONSONG,
      26 |     NotationFormat.NASHVILLE,
      27 |     NotationFormat.GUITAR_TABS,

      at Object.<anonymous> (tests/components/controls/FormatSelector.test.tsx:24:20)

FAIL tests/services/conversion/enhanced-conversion-engine.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../src/services/conversion-engine-old/conversion-engine' from 'tests/services/conversion/enhanced-conversion-engine.test.ts'

    > 1 | import { ConversionEngine } from '../../../../src/services/conversion-engine-old/conversion-engine';
        | ^
      2 | import { ConversionOptions } from '../conversion-engine-old/types/ConversionOptions';
      3 | import { ConversionProgress } from '../conversion-engine-old/types/ConversionProgress';
      4 | import { PerformanceMetrics } from '../conversion-engine-old/types/PerformanceMetrics';

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/enhanced-conversion-engine.test.ts:1:1)

FAIL src/constants/__tests__/chord-mappings.test.ts
  ● Chord Mappings Constants › NASHVILLE_MAJOR_MAPPINGS › should have 7 mappings for each key

    expect(received).toHaveLength(expected)

    Expected length: 7
    Received length: 12
    Received array:  ["C", "D", "E", "F", "G", "A", "B", "C#", "D#", "F#", …]

      158 |     it('should have 7 mappings for each key', () => {
      159 |       Object.values(NASHVILLE_MAJOR_MAPPINGS).forEach(mapping => {
    > 160 |         expect(Object.keys(mapping)).toHaveLength(7);
          |                                      ^
      161 |       });
      162 |     });
      163 |   });

      at src/constants/__tests__/chord-mappings.test.ts:160:38
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/constants/__tests__/chord-mappings.test.ts:159:47)

  ● Chord Mappings Constants › NASHVILLE_MINOR_MAPPINGS › should have 7 mappings for each key

    expect(received).toHaveLength(expected)

    Expected length: 7
    Received length: 12
    Received array:  ["A", "B", "C", "D", "E", "F", "G", "C#", "D#", "F#", …]

      184 |     it('should have 7 mappings for each key', () => {
      185 |       Object.values(NASHVILLE_MINOR_MAPPINGS).forEach(mapping => {
    > 186 |         expect(Object.keys(mapping)).toHaveLength(7);
          |                                      ^
      187 |       });
      188 |     });
      189 |   });

      at src/constants/__tests__/chord-mappings.test.ts:186:38
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/constants/__tests__/chord-mappings.test.ts:185:47)

  ● Chord Mappings Constants › Data integrity › should have all Nashville mappings initialized

    expect(received).toHaveLength(expected)

    Expected length: 7
    Received length: 12
    Received array:  ["C", "D", "E", "F", "G", "A", "B", "C#", "D#", "F#", …]

      325 |       Object.keys(MAJOR_KEY_SIGNATURES).forEach(key => {
      326 |         expect(NASHVILLE_MAJOR_MAPPINGS[key]).toBeDefined();
    > 327 |         expect(Object.keys(NASHVILLE_MAJOR_MAPPINGS[key])).toHaveLength(7);
          |                                                            ^
      328 |       });
      329 |
      330 |       Object.keys(MINOR_KEY_SIGNATURES).forEach(key => {

      at src/constants/__tests__/chord-mappings.test.ts:327:60
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/constants/__tests__/chord-mappings.test.ts:325:41)

FAIL src/tests/integration/conversion-workflow.test.ts
  ● Conversion Workflow Integration › Dependency Injection Integration › should resolve all core services

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Dependency Injection Integration › should resolve all core services

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Dependency Injection Integration › should maintain singleton behavior for registered singletons

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Dependency Injection Integration › should maintain singleton behavior for registered singletons

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Dependency Injection Integration › should inject dependencies correctly

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Dependency Injection Integration › should inject dependencies correctly

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Chord Factory and Builder Integration › should create chords using factory and builder patterns

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Chord Factory and Builder Integration › should create chords using factory and builder patterns

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Chord Factory and Builder Integration › should validate chords through integrated validation

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Chord Factory and Builder Integration › should validate chords through integrated validation

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Key Transposition Integration › should transpose chords with command pattern support

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Key Transposition Integration › should transpose chords with command pattern support

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Key Transposition Integration › should calculate key distances correctly

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Key Transposition Integration › should calculate key distances correctly

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Key Transposition Integration › should provide key relationship analysis

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Key Transposition Integration › should provide key relationship analysis

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Event System Integration › should publish and handle events correctly

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Event System Integration › should publish and handle events correctly

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Event System Integration › should handle multiple subscribers and event types

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Event System Integration › should handle multiple subscribers and event types

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Storage System Integration › should save and load conversion results

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Storage System Integration › should save and load conversion results

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Storage System Integration › should handle storage statistics

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Storage System Integration › should handle storage statistics

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Format Detection Integration › should detect formats with confidence scoring

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Format Detection Integration › should detect formats with confidence scoring

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Format Detection Integration › should handle multiple format detection

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Format Detection Integration › should handle multiple format detection

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Error Recovery Integration › should handle parsing errors gracefully

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Error Recovery Integration › should handle parsing errors gracefully

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Complete Workflow Integration › should handle a complete chord processing workflow

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Complete Workflow Integration › should handle a complete chord processing workflow

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Complete Workflow Integration › should handle event-driven workflow

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Complete Workflow Integration › should handle event-driven workflow

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Complete Workflow Integration › should integrate storage with conversion results

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Complete Workflow Integration › should integrate storage with conversion results

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Performance and Scalability › should handle multiple concurrent operations

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Performance and Scalability › should handle multiple concurrent operations

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Performance and Scalability › should handle large numbers of events efficiently

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Performance and Scalability › should handle large numbers of events efficiently

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

  ● Conversion Workflow Integration › Memory Management › should properly dispose of resources

    TypeError: (0 , container_setup_1.createConfiguredContainer) is not a function

      28 |
      29 |   beforeEach(() => {
    > 30 |     container = createConfiguredContainer({
         |                                          ^
      31 |       storageType: 'memory',
      32 |       errorRecoveryLevel: 'moderate'
      33 |     });

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:30:42)

  ● Conversion Workflow Integration › Memory Management › should properly dispose of resources

    TypeError: Cannot read properties of undefined (reading 'dispose')

      41 |
      42 |   afterEach(() => {
    > 43 |     container.dispose();
         |               ^
      44 |   });
      45 |
      46 |   describe('Dependency Injection Integration', () => {

      at Object.<anonymous> (src/tests/integration/conversion-workflow.test.ts:43:15)

FAIL src/tests/unit/chord/chord-builder.test.ts
  ● ChordBuilder › convenience methods › should build dominant 7th chord

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      351 |       expect(chord.root).toBe('G');
      352 |       expect(chord.quality).toBe(ChordQuality.DOMINANT);
    > 353 |       expect(chord.extensions).toHaveLength(1);
          |                                ^
      354 |       expect(chord.extensions[0].value).toBe('7');
      355 |       expect(chord.originalNotation).toBe('G7');
      356 |     });

      at Object.<anonymous> (src/tests/unit/chord/chord-builder.test.ts:353:32)

FAIL tests/types/chord.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/types/line.test.ts
  ● Line Types › Type Guards › isTextLine › should return true for TextLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      181 |         describe('isTextLine', () => {
      182 |             it('should return true for TextLine', () => {
    > 183 |                 expect(isTextLine(textLine)).toBe(true);
          |                                              ^
      184 |             });
      185 |
      186 |             it('should return false for EmptyLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:183:46)

  ● Line Types › Type Guards › isEmptyLine › should return true for EmptyLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      195 |         describe('isEmptyLine', () => {
      196 |             it('should return true for EmptyLine', () => {
    > 197 |                 expect(isEmptyLine(emptyLine)).toBe(true);
          |                                                ^
      198 |             });
      199 |
      200 |             it('should return false for TextLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:197:48)

  ● Line Types › Type Guards › isAnnotationLine › should return true for AnnotationLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      209 |         describe('isAnnotationLine', () => {
      210 |             it('should return true for AnnotationLine', () => {
    > 211 |                 expect(isAnnotationLine(annotationLine)).toBe(true);
          |                                                          ^
      212 |             });
      213 |
      214 |             it('should return false for TextLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:211:58)

  ● Line Types › Line Validation › validateLine › should validate a valid TextLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: {"chords": [{"endIndex": 3, "originalText": "[C]", "startIndex": 0, "value": "C"}], "errors": ["Line content is required for non-blank lines"], "isValid": false, "lineNumber": 1, "text": "Test text", "type": "text", "warnings": undefined}

      239 |                 };
      240 |
    > 241 |                 expect(validateLine(line)).toBe(true);
          |                                            ^
      242 |             });
      243 |
      244 |             it('should validate a valid EmptyLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:241:44)

  ● Line Types › Line Validation › validateLine › should validate a valid EmptyLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: {"count": 2, "errors": ["Line content is required for non-blank lines"], "isValid": false, "lineNumber": 3, "type": "empty", "warnings": undefined}

      249 |                 };
      250 |
    > 251 |                 expect(validateLine(line)).toBe(true);
          |                                            ^
      252 |             });
      253 |
      254 |             it('should validate a valid AnnotationLine', () => {

      at Object.<anonymous> (tests/types/line.test.ts:251:44)

  ● Line Types › Line Validation › validateLine › should validate a valid AnnotationLine

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: {"annotationType": "comment", "errors": ["Line content is required for non-blank lines"], "isValid": false, "lineNumber": 4, "type": "annotation", "value": "Test annotation", "warnings": undefined}

      260 |                 };
      261 |
    > 262 |                 expect(validateLine(line)).toBe(true);
          |                                            ^
      263 |             });
      264 |
      265 |             it('should reject null or undefined', () => {

      at Object.<anonymous> (tests/types/line.test.ts:262:44)

  ● Line Types › Line Validation › validateLine › should reject null or undefined

    TypeError: Cannot read properties of null (reading 'content')

      116 |
      117 |   // Basic validation
    > 118 |   if (!line.content && line.type !== LineType.BLANK) {
          |             ^
      119 |     errors.push('Line content is required for non-blank lines');
      120 |   }
      121 |

      at validateLine (src/types/line.ts:118:13)
      at Object.<anonymous> (tests/types/line.test.ts:266:36)

  ● Line Types › Line Validation › validateLine › should reject non-object values

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"0": "s", "1": "t", "2": "r", "3": "i", "4": "n", "5": "g", "errors": ["Line content is required for non-blank lines"], "isValid": false, "warnings": undefined}

      269 |
      270 |             it('should reject non-object values', () => {
    > 271 |                 expect(validateLine('string')).toBe(false);
          |                                                ^
      272 |                 expect(validateLine(123)).toBe(false);
      273 |                 expect(validateLine([])).toBe(false);
      274 |             });

      at Object.<anonymous> (tests/types/line.test.ts:271:48)

  ● Line Types › Line Validation › validateLine › should reject invalid type

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"errors": ["Line content is required for non-blank lines"], "isValid": false, "text": "Test", "type": "invalid", "warnings": undefined}

      280 |                 };
      281 |
    > 282 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      283 |             });
      284 |
      285 |             it('should reject TextLine with missing text', () => {

      at Object.<anonymous> (tests/types/line.test.ts:282:51)

  ● Line Types › Line Validation › validateLine › should reject TextLine with missing text

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"chords": [], "errors": ["Line content is required for non-blank lines"], "isValid": false, "type": "text", "warnings": undefined}

      289 |                 };
      290 |
    > 291 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      292 |             });
      293 |
      294 |             it('should reject TextLine with non-array chords', () => {

      at Object.<anonymous> (tests/types/line.test.ts:291:51)

  ● Line Types › Line Validation › validateLine › should reject TextLine with non-array chords

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"chords": "not an array", "errors": ["Line content is required for non-blank lines"], "isValid": false, "text": "Test", "type": "text", "warnings": undefined}

      299 |                 };
      300 |
    > 301 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      302 |             });
      303 |
      304 |             it('should reject EmptyLine with invalid count', () => {

      at Object.<anonymous> (tests/types/line.test.ts:301:51)

  ● Line Types › Line Validation › validateLine › should reject EmptyLine with invalid count

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"count": -1, "errors": ["Line content is required for non-blank lines"], "isValid": false, "type": "empty", "warnings": undefined}

      308 |                 };
      309 |
    > 310 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      311 |             });
      312 |
      313 |             it('should reject AnnotationLine with missing value', () => {

      at Object.<anonymous> (tests/types/line.test.ts:310:51)

  ● Line Types › Line Validation › validateLine › should reject AnnotationLine with missing value

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"annotationType": "comment", "errors": ["Line content is required for non-blank lines"], "isValid": false, "type": "annotation", "warnings": undefined}

      317 |                 };
      318 |
    > 319 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      320 |             });
      321 |
      322 |             it('should reject AnnotationLine with invalid annotationType', () => {

      at Object.<anonymous> (tests/types/line.test.ts:319:51)

  ● Line Types › Line Validation › validateLine › should reject AnnotationLine with invalid annotationType

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"annotationType": "invalid", "errors": ["Line content is required for non-blank lines"], "isValid": false, "type": "annotation", "value": "Test", "warnings": undefined}

      327 |                 };
      328 |
    > 329 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      330 |             });
      331 |
      332 |             it('should reject lines with invalid lineNumber', () => {

      at Object.<anonymous> (tests/types/line.test.ts:329:51)

  ● Line Types › Line Validation › validateLine › should reject lines with invalid lineNumber

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: {"chords": [], "errors": ["Line content is required for non-blank lines"], "isValid": false, "lineNumber": "not a number", "text": "Test", "type": "text", "warnings": undefined}

      338 |                 };
      339 |
    > 340 |                 expect(validateLine(invalidLine)).toBe(false);
          |                                                   ^
      341 |             });
      342 |         });
      343 |     });

      at Object.<anonymous> (tests/types/line.test.ts:340:51)

FAIL tests/e2e/responsive-design.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('Responsive Design Tests', () => {
        |      ^
      4 |   test.beforeEach(async ({ page }) => {
      5 |     await page.goto('/');
      6 |   });

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.<anonymous> (tests/e2e/responsive-design.spec.ts:3:6)

FAIL tests/services/conversion/format-detector.test.ts
  ● Test suite failed to run

    Cannot find module '../format-detector' from 'tests/services/conversion/format-detector.test.ts'

    > 1 | import { FormatDetector } from '../format-detector';
        | ^
      2 | import { NotationFormat } from '../../../src/types';
      3 |
      4 | describe('FormatDetector', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/format-detector.test.ts:1:1)

FAIL tests/components/editor/SectionRenderer.test.tsx
  ● SectionRenderer › Basic Rendering › renders verse section with title

    TestingLibraryElementError: Unable to find an element with the text: Amazing grace how sweet the sound. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Verse 1 section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-blue-300 bg-blue-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-header px-4 py-2 bg-white/50 border-b border-gray-200/50"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-semibold text-gray-700 uppercase tracking-wide"[39m
            [36m>[39m
              [0mVerse 1[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "Amazing grace how sweet the sound",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      72 |       
      73 |       expect(screen.getByText('Verse 1')).toBeInTheDocument();
    > 74 |       expect(screen.getByText('Amazing grace how sweet the sound')).toBeInTheDocument();
         |                     ^
      75 |       expect(screen.getByRole('region')).toHaveAttribute('aria-label', 'Verse 1 section');
      76 |     });
      77 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:74:21)

  ● SectionRenderer › Basic Rendering › renders section without custom title using default title

    TestingLibraryElementError: Unable to find an element with the text: How sweet the sound. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Chorus section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-green-300 bg-green-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-header px-4 py-2 bg-white/50 border-b border-gray-200/50"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-semibold text-gray-700 uppercase tracking-wide"[39m
            [36m>[39m
              [0mChorus[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "How sweet the sound",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      92 |       
      93 |       expect(screen.getByText('Chorus')).toBeInTheDocument();
    > 94 |       expect(screen.getByText('How sweet the sound')).toBeInTheDocument();
         |                     ^
      95 |     });
      96 |
      97 |     it('applies correct styling for different section types', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:94:21)

  ● SectionRenderer › Mixed Line Types › renders section with mixed line types

    TestingLibraryElementError: Unable to find an element with the text: Amazing grace. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Verse section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-blue-300 bg-blue-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-header px-4 py-2 bg-white/50 border-b border-gray-200/50"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-semibold text-gray-700 uppercase tracking-wide"[39m
            [36m>[39m
              [0mVerse[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "Amazing grace",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "empty",
      "count": 1,
      "lineNumber": 2
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "annotation",
      "value": "Play softly",
      "annotationType": "instruction",
      "lineNumber": 3
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      166 |       const { container } = render(<SectionRenderer section={section} />);
      167 |       
    > 168 |       expect(screen.getByText('Amazing grace')).toBeInTheDocument();
          |                     ^
      169 |       expect(screen.getByText('Play softly')).toBeInTheDocument();
      170 |       
      171 |       // Check for empty line using container query since it's aria-hidden

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:168:21)

  ● SectionRenderer › Section Types › does not show title for unknown section type without custom title

    TestingLibraryElementError: Unable to find an element with the text: Some text. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Section section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-gray-300 bg-gray-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "Some text",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      192 |       
      193 |       expect(screen.queryByText('Section')).not.toBeInTheDocument();
    > 194 |       expect(screen.getByText('Some text')).toBeInTheDocument();
          |                     ^
      195 |     });
      196 |
      197 |     it('shows title for unknown section type with custom title', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:194:21)

  ● SectionRenderer › Section Types › shows title for unknown section type with custom title

    TestingLibraryElementError: Unable to find an element with the text: Some text. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33maria-label[39m=[32m"Custom Section section"[39m
          [33mclass[39m=[32m"section mb-6 border-l-4 border-gray-300 bg-gray-50/30 "[39m
          [33mrole[39m=[32m"region"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-header px-4 py-2 bg-white/50 border-b border-gray-200/50"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-sm font-semibold text-gray-700 uppercase tracking-wide"[39m
            [36m>[39m
              [0mCustom Section[0m
            [36m</h3>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"section-content px-4 py-3 space-y-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded mb-1"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xs font-medium"[39m
              [36m>[39m
                [0mUnknown line type:[0m
              [36m</span>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"text-xs mt-1"[39m
              [36m>[39m
                [0m{
      "type": "text",
      "text": "Some text",
      "chords": [],
      "lineNumber": 1
    }[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      212 |       
      213 |       expect(screen.getByText('Custom Section')).toBeInTheDocument();
    > 214 |       expect(screen.getByText('Some text')).toBeInTheDocument();
          |                     ^
      215 |     });
      216 |
      217 |     it('renders all section types with correct default titles', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:214:21)

  ● SectionRenderer › Event Integration › should subscribe to section events on mount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      266 |       render(<SectionRenderer section={section} />);
      267 |       
    > 268 |       expect(mockEventManager.subscribe).toHaveBeenCalled();
          |                                          ^
      269 |     });
      270 |
      271 |     it('should unsubscribe from events on unmount', () => {

      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:268:42)

  ● SectionRenderer › Event Integration › should unsubscribe from events on unmount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      286 |       unmount();
      287 |       
    > 288 |       expect(mockEventManager.unsubscribe).toHaveBeenCalled();
          |                                            ^
      289 |     });
      290 |   });
      291 |

      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:288:44)

  ● SectionRenderer › Error Handling › handles invalid section data gracefully

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of null (reading 'length')"

          93 |       
          94 |       <div className="section-content px-4 py-3 space-y-2">
        > 95 |         {section.lines.length === 0 ? (
             |                        ^
          96 |           <div className="text-gray-400 italic text-sm">
          97 |             (Empty section)
          98 |           </div>

      at SectionRenderer (src/components/editor/SectionRenderer.tsx:95:24)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at tests/components/editor/SectionRenderer.test.tsx:343:15
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:344:14)
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:344:14)

  ● SectionRenderer › Error Handling › handles missing line data gracefully

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of null (reading 'type')"

           99 |
          100 | export function isTextLine(line: Line): line is TextLine {
        > 101 |   return line.type === LineType.CHORD_LYRIC;
              |               ^
          102 | }
          103 |
          104 | export function isEmptyLine(line: Line): line is EmptyLine {

      at isTextLine (src/types/line.ts:101:15)
      at LineRenderer (src/components/editor/LineRenderer.tsx:209:17)
      at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at tests/components/editor/SectionRenderer.test.tsx:364:15
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:365:14)
      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:365:14)

  ● SectionRenderer › Performance › handles large sections efficiently

    expect(received).toBeLessThan(expected)

    Expected: < 100
    Received:   122.00221800000145

      391 |
      392 |       // Should render within reasonable time (less than 100ms)
    > 393 |       expect(endTime - startTime).toBeLessThan(100);
          |                                   ^
      394 |     });
      395 |   });
      396 | });

      at Object.<anonymous> (tests/components/editor/SectionRenderer.test.tsx:393:35)

FAIL tests/services/diverse/__tests__/error-recovery.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../src/services/error-recovery/error-recovery' from 'tests/services/diverse/__tests__/error-recovery.test.ts'

      1 | import { describe, it, expect, beforeEach } from '@jest/globals';
    > 2 | import { ErrorRecoveryService } from '../../../../src/services/error-recovery/error-recovery';
        | ^
      3 | import { ConversionErrorFactory, ConversionErrorType } from '../../../../src/types/conversion-error';
      4 | import { TextLine, AnnotationLine } from '../../../../src/types/line';
      5 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/diverse/__tests__/error-recovery.test.ts:2:1)

FAIL src/renderers/__tests__/songbook-renderer.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/services/diverse/storage/local-storage-provider.test.ts
  ● Test suite failed to run

    Cannot find module '../local-storage-provider' from 'tests/services/diverse/storage/local-storage-provider.test.ts'

    > 1 | import { LocalStorageProvider } from '../local-storage-provider';
        | ^
      2 | import { FileMetadata } from '../storage-provider.interface';
      3 |
      4 | // Mock localStorage

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/diverse/storage/local-storage-provider.test.ts:1:1)

FAIL src/renderers/__tests__/base-renderer.test.ts
  ● BaseRenderer › render › should render complete chordsheet with metadata

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at TestRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:88:37)

  ● BaseRenderer › render › should render without metadata when option is disabled

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at TestRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:106:37)

  ● BaseRenderer › render › should handle multiple sections with spacing

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at TestRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:127:37)

  ● BaseRenderer › render › should include rendering time in metadata

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at TestRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:144:37)

  ● BaseRenderer › renderSection › should render section with title and lines

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:166:37)

  ● BaseRenderer › renderSection › should render section without title

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at TestRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:184:37)

  ● BaseRenderer › renderLine › should delegate to line renderer

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at TestRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at Object.<anonymous> (src/renderers/__tests__/base-renderer.test.ts:199:37)

FAIL src/renderers/__tests__/line-renderer.test.ts
  ● LineRenderer › renderLine › should route to correct renderer based on line type

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at Object.<anonymous> (src/renderers/__tests__/line-renderer.test.ts:243:29)

FAIL tests/services/diverse/storage/cloud-storage-integration.test.ts
  ● Cloud Storage Integration › OAuthManager › should store and retrieve tokens

    expect(received).toEqual(expected) // deep equality

    Expected: {"accessToken": "test-access-token", "expiresAt": 1753825374456, "refreshToken": "test-refresh-token", "tokenType": "Bearer"}
    Received: null

      153 |       const retrieved = OAuthManager.getTokens('test-provider');
      154 |
    > 155 |       expect(retrieved).toEqual(tokens);
          |                         ^
      156 |     });
      157 |
      158 |     it('should detect expired tokens', () => {

      at Object.<anonymous> (tests/services/diverse/storage/cloud-storage-integration.test.ts:155:25)

  ● Cloud Storage Integration › OAuthManager › should check authentication status

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      185 |
      186 |       OAuthManager.storeTokens('test-provider', tokens);
    > 187 |       expect(OAuthManager.isAuthenticated('test-provider')).toBe(true);
          |                                                             ^
      188 |     });
      189 |
      190 |     it('should clear all tokens', () => {

      at Object.<anonymous> (tests/services/diverse/storage/cloud-storage-integration.test.ts:187:61)

  ● Cloud Storage Integration › OAuthManager › should clear all tokens

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      199 |       OAuthManager.storeTokens('provider2', tokens);
      200 |
    > 201 |       expect(OAuthManager.isAuthenticated('provider1')).toBe(true);
          |                                                         ^
      202 |       expect(OAuthManager.isAuthenticated('provider2')).toBe(true);
      203 |
      204 |       OAuthManager.clearAllTokens();

      at Object.<anonymous> (tests/services/diverse/storage/cloud-storage-integration.test.ts:201:57)

FAIL tests/services/diverse/storage/file-operations.test.ts
  ● Test suite failed to run

    Cannot find module '../format-detector' from 'tests/services/diverse/storage/file-operations.test.ts'

       5 |
       6 | // Mock the FormatDetector and AutoKeyDetection
    >  7 | jest.mock('../format-detector');
         |      ^
       8 | jest.mock('../auto-key-detection');
       9 |
      10 | const mockFormatDetector = FormatDetector as jest.MockedClass<typeof FormatDetector>;

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/diverse/storage/file-operations.test.ts:7:6)

FAIL src/tests/setup.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/renderers/__tests__/chordpro-renderer.test.ts
  ● ChordProRenderer › renderMetadata › should render ChordPro-style metadata

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:73:37)

  ● ChordProRenderer › renderMetadata › should not render metadata when option is disabled

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:85:37)

  ● ChordProRenderer › renderMetadata › should handle missing metadata gracefully

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:97:37)

  ● ChordProRenderer › full rendering › should render complete ChordPro document

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:208:37)

  ● ChordProRenderer › full rendering › should preserve original text when requested

    Unknown line type: text

      21 |         }
      22 |         
    > 23 |         throw new Error(`Unknown line type: ${(line as any).type}`);
         |               ^
      24 |     }
      25 |
      26 |     /**

      at LineRenderer.renderLine (src/renderers/core/line-renderer.ts:23:15)
      at ChordProRenderer.renderLine (src/renderers/core/base-renderer.ts:172:34)
      at ChordProRenderer.renderSection (src/renderers/core/base-renderer.ts:149:38)
      at ChordProRenderer.render (src/renderers/core/base-renderer.ts:95:41)
      at Object.<anonymous> (src/renderers/__tests__/chordpro-renderer.test.ts:220:37)

FAIL tests/components/editor/LineRenderer.test.tsx
  ● LineRenderer › LineRenderer (main component) › renders text line correctly

    TestingLibraryElementError: Unable to find an element with the text: Test text. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded "[39m
        [36m>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs font-medium"[39m
          [36m>[39m
            [0mUnknown line type:[0m
          [36m</span>[39m
          [36m<pre[39m
            [33mclass[39m=[32m"text-xs mt-1"[39m
          [36m>[39m
            [0m{
      "type": "text",
      "text": "Test text",
      "chords": [],
      "lineNumber": 1
    }[0m
          [36m</pre>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      182 |       render(<LineRenderer line={line} />);
      183 |       
    > 184 |       expect(screen.getByText('Test text')).toBeInTheDocument();
          |                     ^
      185 |     });
      186 |
      187 |     it('renders empty line correctly', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/LineRenderer.test.tsx:184:21)

  ● LineRenderer › LineRenderer (main component) › renders empty line correctly

    expect(received).toBeInTheDocument()

    received value must be an HTMLElement or an SVGElement.
    Received has value: null

      195 |       
      196 |       const emptyLineElement = container.querySelector('.empty-line');
    > 197 |       expect(emptyLineElement).toBeInTheDocument();
          |                                ^
      198 |       expect(emptyLineElement).toHaveAttribute('role', 'presentation');
      199 |     });
      200 |

      at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:325:30)
      at Object.throwingMatcher [as toBeInTheDocument] (node_modules/expect/build/index.js:326:15)
      at Object.<anonymous> (tests/components/editor/LineRenderer.test.tsx:197:32)

  ● LineRenderer › LineRenderer (main component) › renders annotation line correctly

    TestingLibraryElementError: Unable to find an element with the text: Test annotation. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"unknown-line text-red-500 bg-red-50 p-2 border border-red-200 rounded "[39m
        [36m>[39m
          [36m<span[39m
            [33mclass[39m=[32m"text-xs font-medium"[39m
          [36m>[39m
            [0mUnknown line type:[0m
          [36m</span>[39m
          [36m<pre[39m
            [33mclass[39m=[32m"text-xs mt-1"[39m
          [36m>[39m
            [0m{
      "type": "annotation",
      "value": "Test annotation",
      "annotationType": "comment",
      "lineNumber": 1
    }[0m
          [36m</pre>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      209 |       render(<LineRenderer line={line} />);
      210 |       
    > 211 |       expect(screen.getByText('Test annotation')).toBeInTheDocument();
          |                     ^
      212 |     });
      213 |
      214 |     it('renders fallback for unknown line types', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.<anonymous> (tests/components/editor/LineRenderer.test.tsx:211:21)

FAIL tests/services/diverse/__tests__/file-operations-e2e.test.ts
  ● Test suite failed to run

    Cannot find module '../services/file-operations' from 'tests/services/diverse/__tests__/file-operations-e2e.test.ts'

    > 1 | import { FileOperations } from '../services/file-operations';
        | ^
      2 | import { ConversionEngine } from '../services/conversion-engine-old/conversion-engine';
      3 | import { NotationFormat } from '../types';
      4 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/diverse/__tests__/file-operations-e2e.test.ts:1:1)

FAIL tests/services/conversion/format-detector-samples.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/services/conversion-engine/format-detector' from 'tests/services/conversion/format-detector-samples.test.ts'

      2 | import { expect } from '@playwright/test';
      3 |
    > 4 | import { FormatDetector } from '../../../src/services/conversion-engine/format-detector';
        | ^
      5 | import { NotationFormat } from '../../../src/types';
      6 |
      7 | describe('FormatDetector - Real World Samples', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/format-detector-samples.test.ts:4:1)

FAIL tests/services/conversion/conversion-engine.test.ts
  ● Test suite failed to run

    Cannot find module '../../../../src/services/conversion-engine-old/conversion-engine' from 'tests/services/conversion/conversion-engine.test.ts'

    > 1 | import { ConversionEngine } from '../../../../src/services/conversion-engine-old/conversion-engine';
        | ^
      2 | import { NotationFormat } from '../../../src/types';
      3 |
      4 | describe('ConversionEngine', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/conversion-engine.test.ts:1:1)

FAIL tests/types/format.test.ts
  ● Format Types › SectionType enum › should have exactly 11 section types

    expect(received).toHaveLength(expected)

    Expected length: 11
    Received length: 14
    Received array:  ["verse", "chorus", "bridge", "intro", "outro", "instrumental", "pre_chorus", "post_chorus", "tag", "vamp", …]

      41 |     it('should have exactly 11 section types', () => {
      42 |       const sectionValues = Object.values(SectionType);
    > 43 |       expect(sectionValues).toHaveLength(11);
         |                             ^
      44 |     });
      45 |
      46 |     it('should contain only string values', () => {

      at Object.<anonymous> (tests/types/format.test.ts:43:29)

FAIL tests/services/conversion/chord-pro.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/chord-pro' from 'tests/services/conversion/chord-pro.test.ts'

      1 | import { describe, it } from 'node:test';
      2 | import { expect } from '@playwright/test';
    > 3 | import { ChordProParser } from '../../../src/parsers/annotations/chord-pro';
        | ^
      4 | import { AnnotationFormat } from '../../../src/types';
      5 |
      6 | describe('ChordProParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/chord-pro.test.ts:3:1)

FAIL tests/services/conversion/guitar-tabs.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/guitar-tabs' from 'tests/services/conversion/guitar-tabs.test.ts'

    > 1 | import { GuitarTabsParser } from '../../../src/parsers/annotations/guitar-tabs';
        | ^
      2 | import { AnnotationFormat } from '../../../src/types';
      3 |
      4 | describe('GuitarTabsParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/guitar-tabs.test.ts:1:1)

FAIL tests/services/conversion/planning-center.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/planning-center' from 'tests/services/conversion/planning-center.test.ts'

    > 1 | import { PlanningCenterParser } from '../../../src/parsers/annotations/planning-center';
        | ^
      2 | import { AnnotationFormat } from '../../../src/types';
      3 |
      4 | describe('PlanningCenterParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/planning-center.test.ts:1:1)

FAIL tests/services/conversion/songbook.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/songbook' from 'tests/services/conversion/songbook.test.ts'

    > 1 | import { SongbookParser } from '../../../src/parsers/annotations/songbook';
        | ^
      2 | import { AnnotationFormat } from '../../../src/types';
      3 |
      4 | describe('SongbookParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/songbook.test.ts:1:1)

FAIL tests/services/conversion/on-song.test.ts
  ● Test suite failed to run

    Cannot find module '../../../src/parsers/annotations/on-song' from 'tests/services/conversion/on-song.test.ts'

    > 1 | import { OnSongParser } from '../../../src/parsers/annotations/on-song';
        | ^
      2 | import { AnnotationFormat } from '../../../src/types';
      3 |
      4 | describe('OnSongParser', () => {

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (tests/services/conversion/on-song.test.ts:1:1)

FAIL src/tests/global-setup.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/tests/global-teardown.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/services/conversion/songbook-parser.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/components/integration/MusicConverter.integration.test.tsx
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)


Test Suites: 48 failed, 16 passed, 64 total
Tests:       197 failed, 499 passed, 696 total
Snapshots:   0 total
Time:        58.329 s
Ran all test suites.
ℹ tests 46
ℹ suites 20
ℹ pass 10
ℹ fail 36
ℹ cancelled 0
ℹ skipped 0
ℹ todo 0
ℹ duration_ms 32075.402601

✖ failing tests:

test at tests/types/chord.test.ts:8:28
✖ should create a valid ChordPlacement (1.929508ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:16:36)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Test.start (node:internal/test_runner/test:959:17)
      at node:internal/test_runner/test:1464:71
      at node:internal/per_context/primordials:483:82
      at new Promise (<anonymous>)
      at new SafePromise (node:internal/per_context/primordials:451:29)
      at node:internal/per_context/primordials:483:9
      at Array.map (<anonymous>)
      at arrayToSafePromiseIterable (node:internal/per_context/primordials:480:5)
      at node:internal/per_context/primordials:497:21
      at new Promise (<anonymous>)
      at node:internal/per_context/primordials:496:3
      at Suite.run (node:internal/test_runner/test:1464:23)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at startSubtestAfterBootstrap (node:internal/test_runner/harness:332:3)

test at tests/types/chord.test.ts:22:28
✖ should create ChordPlacement without optional placement (0.22396ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:29:36)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at startSubtestAfterBootstrap (node:internal/test_runner/harness:332:3)

test at tests/types/chord.test.ts:35:28
✖ should accept all valid placement values (0.20539ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at /home/runner/workspace/tests/types/chord.test.ts:45:40
      at Array.forEach (<anonymous>)
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:37:24)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:50:28
✖ should create a valid Chord (0.27967ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:62:36)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Test.start (node:internal/test_runner/test:959:17)
      at node:internal/test_runner/test:1464:71
      at node:internal/per_context/primordials:483:82
      at new Promise (<anonymous>)
      at new SafePromise (node:internal/per_context/primordials:451:29)
      at node:internal/per_context/primordials:483:9
      at Array.map (<anonymous>)
      at arrayToSafePromiseIterable (node:internal/per_context/primordials:480:5)
      at node:internal/per_context/primordials:497:21
      at new Promise (<anonymous>)
      at node:internal/per_context/primordials:496:3
      at Suite.run (node:internal/test_runner/test:1464:23)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:69:28
✖ should create Chord without optional fields (0.33912ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:76:36)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:83:28
✖ should accept all chord qualities (1.971079ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at /home/runner/workspace/tests/types/chord.test.ts:92:40
      at Array.forEach (<anonymous>)
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:85:23)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:97:28
✖ should create valid ChordExtension (0.611309ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:103:36)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Test.start (node:internal/test_runner/test:959:17)
      at node:internal/test_runner/test:1464:71
      at node:internal/per_context/primordials:483:82
      at new Promise (<anonymous>)
      at new SafePromise (node:internal/per_context/primordials:451:29)
      at node:internal/per_context/primordials:483:9
      at Array.map (<anonymous>)
      at arrayToSafePromiseIterable (node:internal/per_context/primordials:480:5)
      at node:internal/per_context/primordials:497:21
      at new Promise (<anonymous>)
      at node:internal/per_context/primordials:496:3
      at Suite.run (node:internal/test_runner/test:1464:23)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:107:28
✖ should accept all extension types (0.30815ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at /home/runner/workspace/tests/types/chord.test.ts:115:40
      at Array.forEach (<anonymous>)
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:109:19)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:121:32
✖ should validate a valid ChordPlacement (0.419929ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:129:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Test.start (node:internal/test_runner/test:959:17)
      at node:internal/test_runner/test:1464:71
      at node:internal/per_context/primordials:483:82
      at new Promise (<anonymous>)
      at new SafePromise (node:internal/per_context/primordials:451:29)
      at node:internal/per_context/primordials:483:9
      at Array.map (<anonymous>)
      at arrayToSafePromiseIterable (node:internal/per_context/primordials:480:5)
      at node:internal/per_context/primordials:497:21
      at new Promise (<anonymous>)
      at node:internal/per_context/primordials:496:3
      at Suite.run (node:internal/test_runner/test:1464:23)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:131:32
✖ should validate ChordPlacement without optional placement (0.403819ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:138:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:140:32
✖ should reject null or undefined (0.17449ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:141:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:144:32
✖ should reject non-object values (0.25707ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:145:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:148:32
✖ should reject missing required fields (0.17786ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:155:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:157:32
✖ should reject invalid startIndex/endIndex (0.16544ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:164:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:166:32
✖ should reject negative startIndex (0.1494ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:173:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:175:32
✖ should reject invalid placement value (0.16262ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:183:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:187:32
✖ should validate a valid Chord (0.40587ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:198:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Test.start (node:internal/test_runner/test:959:17)
      at node:internal/test_runner/test:1464:71
      at node:internal/per_context/primordials:483:82
      at new Promise (<anonymous>)
      at new SafePromise (node:internal/per_context/primordials:451:29)
      at node:internal/per_context/primordials:483:9
      at Array.map (<anonymous>)
      at arrayToSafePromiseIterable (node:internal/per_context/primordials:480:5)
      at node:internal/per_context/primordials:497:21
      at new Promise (<anonymous>)
      at node:internal/per_context/primordials:496:3
      at Suite.run (node:internal/test_runner/test:1464:23)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:200:32
✖ should validate Chord without optional fields (0.2547ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:207:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:209:32
✖ should reject null or undefined (0.179149ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:210:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:213:32
✖ should reject invalid quality (0.1855ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:220:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:222:32
✖ should reject invalid extensions array (0.20101ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:229:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:233:32
✖ should validate a valid ChordExtension (0.23487ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:239:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Test.start (node:internal/test_runner/test:959:17)
      at node:internal/test_runner/test:1464:71
      at node:internal/per_context/primordials:483:82
      at new Promise (<anonymous>)
      at new SafePromise (node:internal/per_context/primordials:451:29)
      at node:internal/per_context/primordials:483:9
      at Array.map (<anonymous>)
      at arrayToSafePromiseIterable (node:internal/per_context/primordials:480:5)
      at node:internal/per_context/primordials:497:21
      at new Promise (<anonymous>)
      at node:internal/per_context/primordials:496:3
      at Suite.run (node:internal/test_runner/test:1464:23)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:241:32
✖ should reject null or undefined (0.22293ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:242:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:245:32
✖ should reject invalid type (0.16519ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:251:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:253:32
✖ should reject missing required fields (0.14852ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:259:40)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:264:28
✖ should have all expected values (0.21223ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:265:36)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Test.start (node:internal/test_runner/test:959:17)
      at node:internal/test_runner/test:1464:71
      at node:internal/per_context/primordials:483:82
      at new Promise (<anonymous>)
      at new SafePromise (node:internal/per_context/primordials:451:29)
      at node:internal/per_context/primordials:483:9
      at Array.map (<anonymous>)
      at arrayToSafePromiseIterable (node:internal/per_context/primordials:480:5)
      at node:internal/per_context/primordials:497:21
      at new Promise (<anonymous>)
      at node:internal/per_context/primordials:496:3
      at Suite.run (node:internal/test_runner/test:1464:23)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:272:28
✖ should contain exactly 6 values (0.149389ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:274:36)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:279:28
✖ should accept valid annotation objects (0.2245ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:285:36)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Test.start (node:internal/test_runner/test:959:17)
      at node:internal/test_runner/test:1464:71
      at node:internal/per_context/primordials:483:82
      at new Promise (<anonymous>)
      at new SafePromise (node:internal/per_context/primordials:451:29)
      at node:internal/per_context/primordials:483:9
      at Array.map (<anonymous>)
      at arrayToSafePromiseIterable (node:internal/per_context/primordials:480:5)
      at node:internal/per_context/primordials:497:21
      at new Promise (<anonymous>)
      at node:internal/per_context/primordials:496:3
      at Suite.run (node:internal/test_runner/test:1464:23)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at tests/types/chord.test.ts:289:28
✖ should accept all valid position values (0.19781ms)
  TypeError: (0 , node_test_1.expect) is not a function
      at /home/runner/workspace/tests/types/chord.test.ts:297:40
      at Array.forEach (<anonymous>)
      at TestContext.<anonymous> (/home/runner/workspace/tests/types/chord.test.ts:291:23)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)
      at Test.postRun (node:internal/test_runner/test:1191:19)
      at Test.run (node:internal/test_runner/test:1119:12)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at src/renderers/__tests__/songbook-renderer.test.ts:58:28
✖ should render Songbook-style metadata (0.34902ms)
  Error: Unknown line type: text
      at LineRenderer.renderLine (/home/runner/workspace/src/renderers/core/line-renderer.ts:27:15)
      at SongbookRenderer.renderLine (/home/runner/workspace/src/renderers/core/base-renderer.ts:128:34)
      at SongbookRenderer.renderSection (/home/runner/workspace/src/renderers/core/base-renderer.ts:109:38)
      at SongbookRenderer.render (/home/runner/workspace/src/renderers/core/base-renderer.ts:63:41)
      at TestContext.<anonymous> (/home/runner/workspace/src/renderers/__tests__/songbook-renderer.test.ts:69:37)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at src/renderers/__tests__/songbook-renderer.test.ts:64:28
✖ should handle metadata with tempo and capo (0.21481ms)
  Error: Unknown line type: text
      at LineRenderer.renderLine (/home/runner/workspace/src/renderers/core/line-renderer.ts:27:15)
      at SongbookRenderer.renderLine (/home/runner/workspace/src/renderers/core/base-renderer.ts:128:34)
      at SongbookRenderer.renderSection (/home/runner/workspace/src/renderers/core/base-renderer.ts:109:38)
      at SongbookRenderer.render (/home/runner/workspace/src/renderers/core/base-renderer.ts:63:41)
      at TestContext.<anonymous> (/home/runner/workspace/src/renderers/__tests__/songbook-renderer.test.ts:82:37)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at src/renderers/__tests__/songbook-renderer.test.ts:153:28
✖ should render chords above text by default (0.17053ms)
  Error: Unknown line type: text
      at LineRenderer.renderLine (/home/runner/workspace/src/renderers/core/line-renderer.ts:27:15)
      at SongbookRenderer.renderLine (/home/runner/workspace/src/renderers/core/base-renderer.ts:128:34)
      at SongbookRenderer.renderSection (/home/runner/workspace/src/renderers/core/base-renderer.ts:109:38)
      at SongbookRenderer.render (/home/runner/workspace/src/renderers/core/base-renderer.ts:63:41)
      at TestContext.<anonymous> (/home/runner/workspace/src/renderers/__tests__/songbook-renderer.test.ts:184:37)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at src/renderers/__tests__/songbook-renderer.test.ts:158:28
✖ should handle complex chord positioning (0.29683ms)
  Error: Unknown line type: text
      at LineRenderer.renderLine (/home/runner/workspace/src/renderers/core/line-renderer.ts:27:15)
      at SongbookRenderer.renderLine (/home/runner/workspace/src/renderers/core/base-renderer.ts:128:34)
      at SongbookRenderer.renderSection (/home/runner/workspace/src/renderers/core/base-renderer.ts:109:38)
      at SongbookRenderer.render (/home/runner/workspace/src/renderers/core/base-renderer.ts:63:41)
      at TestContext.<anonymous> (/home/runner/workspace/src/renderers/__tests__/songbook-renderer.test.ts:227:37)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at src/renderers/__tests__/songbook-renderer.test.ts:199:28
✖ should render comments with three empty lines after (0.20155ms)
  Error: Unknown line type: text
      at LineRenderer.renderLine (/home/runner/workspace/src/renderers/core/line-renderer.ts:27:15)
      at SongbookRenderer.renderLine (/home/runner/workspace/src/renderers/core/base-renderer.ts:128:34)
      at SongbookRenderer.renderSection (/home/runner/workspace/src/renderers/core/base-renderer.ts:109:38)
      at SongbookRenderer.render (/home/runner/workspace/src/renderers/core/base-renderer.ts:63:41)
      at TestContext.<anonymous> (/home/runner/workspace/src/renderers/__tests__/songbook-renderer.test.ts:245:37)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at src/renderers/__tests__/songbook-renderer.test.ts:211:28
✖ should use correct spacing between sections (0.23595ms)
  Error: Unknown line type: text
      at LineRenderer.renderLine (/home/runner/workspace/src/renderers/core/line-renderer.ts:27:15)
      at SongbookRenderer.renderLine (/home/runner/workspace/src/renderers/core/base-renderer.ts:128:34)
      at SongbookRenderer.renderSection (/home/runner/workspace/src/renderers/core/base-renderer.ts:109:38)
      at SongbookRenderer.render (/home/runner/workspace/src/renderers/core/base-renderer.ts:63:41)
      at TestContext.<anonymous> (/home/runner/workspace/src/renderers/__tests__/songbook-renderer.test.ts:274:37)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)

test at src/renderers/__tests__/songbook-renderer.test.ts:237:28
✖ should render complete Songbook document (0.23586ms)
  Error: Unknown line type: text
      at LineRenderer.renderLine (/home/runner/workspace/src/renderers/core/line-renderer.ts:27:15)
      at SongbookRenderer.renderLine (/home/runner/workspace/src/renderers/core/base-renderer.ts:128:34)
      at SongbookRenderer.renderSection (/home/runner/workspace/src/renderers/core/base-renderer.ts:109:38)
      at SongbookRenderer.render (/home/runner/workspace/src/renderers/core/base-renderer.ts:63:41)
      at TestContext.<anonymous> (/home/runner/workspace/src/renderers/__tests__/songbook-renderer.test.ts:283:37)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1062:25)
      at async Promise.all (index 0)
      at Suite.run (node:internal/test_runner/test:1466:7)
      at Suite.processPendingSubtests (node:internal/test_runner/test:752:7)
